{
    "$schema": "http://json-schema.org/schema#",
    "$id": "https://gene-tracker.clinicalgenome.org/gene-tracker-event-schema.json",
    "title": "GeneTracker Event",
    "description": "A event published to the GeneTracker event feed.",
    "type": "object",
    "properties": {
        "key": {
            "type": "string",
            "pattern": "\\w{6}(-\\w{4}){3}-\\w{12}^$"
        },
        "event_type": {
            "type": "string",
            "title": "Type of curation event",
            "enum": ["created", "updated", "deleted"]
        },
        "data": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer",
                    "minimum": 1
                },
                "gene": {
                    "type": "object",
                    "properties": {
                        "hgnc_id": {
                            "type": "string",
                            "pattern": "^HGNC:[0-9]*$"
                        },
                        "symbol": {
                            "type": "string"
                        }
                    },
                    "required": ["hgnc_id", "symbol"]
                },
                "mondo_id": {
                    "type": "string",
                    "pattern": "^MONDO:[0-9]{7}"
                },
                "mode_of_inheritance": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "type": "string"
                        },
                        "hp_id": {
                            "type": "string",
                            "format": "^HP:[0-9]{7}"
                        }
                    }
                },
                "curator": {
                    "type": "object",
                    "properties": {
                        "id": { "type": "integer" },
                        "name": { "type": "string" },
                        "email": {
                            "type": "string",
                            "format": "email"
                        }
                    }
                },
                "statuses": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string",
                                "enum": [
                                    "uploaded",
                                    "precuration",
                                    "disease entity assigned",
                                    "curation in progress",
                                    "curation provisional",
                                    "curation approved",
                                    "recuration assigned",
                                    "retired assignment",
                                    "published"
                                ],
                                "uniqueItems": false
                            },
                            "effective_date": {
                                "type": "string",
                                "format": "date-time"
                            }
                        },
                        "required": ["name", "effective_date"]
                    }
                },
                "pmids": {
                    "type": "array",
                    "items": {
                        "type": "integer",
                        "uniqueItems": true
                    }
                },
                "rationales": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "curation_type": {
                    "type": "object",
                    "properties": {
                        "name": {
                            "type": "string",
                            "enum": [
                                "single-omim",
                                "single-new",
                                "isolated-phenotype",
                                "lumped"
                            ]
                        },
                        "description": { "type": "string" }
                    }
                },
                "omim_phenotypes": {
                    "type": "array",
                    "items": {
                        "type": "string",
                        "pattern": "^\\d{7}$"
                    }
                }
            }
        }
    },
    "required": ["id", "gene"]
}