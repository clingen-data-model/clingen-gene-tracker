/*! For license information please see CurationShow.a9bd11d59bfb9535.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[188],{1956:(t,e,n)=>{var r=n(7092),o=Object.create(r);o.baseUrl="/api/omim",o.all=function(t){throw"all method is not supported"},o.all=function(t){throw'"all" method is not supported'},o.store=function(t){throw'"store" method is not supported'},o.update=function(t){throw'"update" method is not supported'},o.destroy=function(t){throw'"destroy" method is not supported'},o.entry=function(t){return console.warn("OmimRepo.entry has been deprecated due to lack of use and will be removed in the future"),this.makeRequest("get",this.baseUrl+"/entry?mim_number="+t)},o.search=function(t){return console.warn("OmimRepo.search has been deprecated due to lack of use and will be removed in the future"),this.makeRequest("get",this.baseUrl+"/search?search="+t)},o.gene=function(t){return this.makeRequest("get",this.baseUrl+"/gene/"+t)},o.forCuration=function(t){var e="".concat(o.baseUrl,"/curation/").concat(t);return console.log({baseUrl:o.baseUrl,curationId:t,url:e}),this.makeRequest("get",e)},t.exports=o},7092:t=>{var e=function(t){var e=[];for(var n in t)e.push(n+"="+t[n]);return"?"+e.join("&")};t.exports={baseUrl:null,name:"BaseRepository",dates:[],makeRequest:function(t,e,n){if(!e)throw"No url";var r={method:t=t||"GET",url:e};return n&&(r.data=n),window.axios(r)},all:function(t){var n=this.baseUrl+e(t);return this.makeRequest("get",n).then(function(t){return{data:t.data.map(function(t){return this.transformDates(t)}.bind(this)),status:t.status,headers:t.headers,request:t.request,statusText:t.statusText,config:t.config}}.bind(this)).catch(function(t){var e;return e="Unable to retrieve "+this.name,console.error(e),alert("There was a problem: "+e+". Please notify the development team."),t}.bind(this))},find:function(t,n){var r=this.baseUrl+"/"+t+e(n);return this.makeRequest("get",r).then(function(t){return t.data=this.transformDates(t.data),t}.bind(this))},save:function(t){for(var e in t)t[e]&&t[e]._isAMomentObject?t[e]=t[e].format("YYYY-MM-DD HH:mm:ss"):this.dates.indexOf(e)>-1&&(t[e]=moment(t[e]).format("YYYY-MM-DD HH:mm:ss"));return t.id?this.update(t):this.store(t)},store:function(t){return this.makeRequest("post",this.baseUrl,t).then(function(t){return t.data=this.transformDates(t.data),t}.bind(this))},update:function(t){return this.makeRequest("put",this.baseUrl+"/"+t.id,t)},destroy:function(t){return this.makeRequest("delete",this.baseUrl+"/"+t)},transformDates:function(t){var e={};for(var n in t)this.dates.indexOf(n)>-1?e[n]=moment(t[n]):e[n]=t[n];return e}}},6084:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(4432),o=n.n(r),i=n(2312),a=n.n(i)()(o());a.push([t.id,"tr.highlight td[data-v-01539821]{font-weight:700}","",{version:3,sources:["webpack://./resources/assets/js/components/Curations/ClassificationHistory.vue"],names:[],mappings:"AACA,iCACA,eACA",sourcesContent:['<style scoped>\n    tr.highlight td {\n        font-weight: bold;\n    }\n</style>\n<template>\n    <div class="curation-classification-history">\n        \x3c!-- <pre>{{curation.classifications}}</pre> --\x3e\n        <table class="table table-bordered table-small">\n            <tr>\n                <th>Classification</th>\n                <th>Date</th>\n            </tr>\n            <tr \n                v-for="(classification, idx) in orderedClassifications" \n                :key="classification.pivot.id" \n                :class="{\'table-primary highlight\': (idx == 0)}"\n            >\n                <td>{{classification.name}}</td>\n                <td>{{classification.pivot.classification_date | formatDate(\'YYYY-MM-DD\') }}</td>\n            </tr>\n        </table>\n    </div>\n</template>\n<script>\n    import moment from \'moment\'\n    import filters from \'../../filters\'\n    \n    export default {\n        props: {\n            curation: {\n                type: Object,\n                required: true\n            },\n        },\n        computed: {\n            orderedClassifications: function () {\n                if (this.curation.classifications) {\n                    return this.curation.classifications.concat().sort((a, b) => {\n                        if (moment(a.pivot.classification_date).isSame(b.pivot.classification_date)) {\n                            if(a.id == b.id) {\n                                return 0\n                            }\n                            if (a.id < b.id) {\n                                return -1\n                            }\n                            return 1;\n                        }\n                        if (moment(a.pivot.classification_date).isBefore(b.pivot.classification_date)) {\n                            return 1;\n                        }\n                        return -1;\n                    })\n                }\n                return [];\n            }\n        }\n    }\n<\/script>'],sourceRoot:""}]);const s=a},6036:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(4432),o=n.n(r),i=n(2312),a=n.n(i)()(o());a.push([t.id,"tr.highlight td[data-v-0ab4573c]{font-weight:700}","",{version:3,sources:["webpack://./resources/assets/js/components/Curations/HistoryTable.vue"],names:[],mappings:"AACA,iCACA,eACA",sourcesContent:["<style scoped>\n    tr.highlight td {\n        font-weight: bold;\n    }\n</style>\n<template>\n    <div>\n        <table class=\"table table-bordered table-small\">\n            <tr>\n                <th>{{itemLabel}}</th>\n                <th>Date</th>\n            </tr>\n            <tr \n                v-for=\"(item, idx) in orderedItems\" \n                :key=\"(indexAttribute) ? item[indexAttribute] : idx\"\n                :class=\"{'table-primary highlight': (idx == 0)}\"\n            >\n                <td>{{item.name}}</td>\n                <td>{{item.pivot[dateField] | formatDate('YYYY-MM-DD') }}</td>\n            </tr>\n        </table>\n    </div>\n</template>\n<script>\n    import moment from 'moment'\n    import filters from '../../filters'\n    \n    export default {\n        props: {\n            items: {\n                type: Array,\n                required: true\n            },\n            itemLabel: {\n                type: String,\n                required: true\n            },\n            dateField: {\n                type: String,\n                required: true,\n            },\n            indexAttribute: {\n                type: String,\n                required: false,\n                default: null\n            }\n        },\n        computed: {\n            orderedItems: function () {\n                if (this.items) {\n                    return this.items.concat().sort((a, b) => {\n                        if (moment(a.pivot[this.dateField]).isSame(b.pivot[this.dateField])) {\n                            if(a.id == b.id) {\n                                return 0\n                            }\n                            if (a.id < b.id) {\n                                return 1\n                            }\n                            return -1;\n                        }\n                        if (moment(a.pivot[this.dateField]).isBefore(b.pivot[this.dateField])) {\n                            return 1;\n                        }\n                        return -1;\n                    })\n                }\n                return [];\n            }\n        }\n    }\n<\/script>"],sourceRoot:""}]);const s=a},592:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(4432),o=n.n(r),i=n(2312),a=n.n(i)()(o());a.push([t.id,".unused[data-v-2884e836]{color:#aaa}","",{version:3,sources:["webpack://./resources/assets/js/components/Curations/Phenotypes/List.vue"],names:[],mappings:"AACA,yBACA,UAEA",sourcesContent:['<style scoped>\n    .unused {\n        color: #aaa;\n        /*text-decoration: line-through;*/\n    }\n</style>\n<template>\n    <div class="component-container row">\n        <div v-if="phenotypes.length > 0" class=" col-lg-8">\n            \x3c!-- <strong>In this curation</strong> --\x3e\n            <table class="table table-sm table-xs mb-0">\n                <thead>\n                    <th>MIM Number</th>\n                    <th style="width: 80%">Phenotype</th>\n                </thead>\n                <tbody>\n                    <tr v-for="phenotype in phenotypes" :key="phenotype.id">\n                        <td>{{ phenotype.mim_number }}</td>\n                        <td>{{ phenotype.name }}</td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        <div class="col" v-else>\n            No phenotypes in this curation\n        </div>\n    </div>\n</template>\n<script>\n    import OmimRepo from \'./../../../repositories/OmimRepository\';\n\n    export default {\n        props: {\n            geneSymbol: {\n                required: true,\n            }, \n            curation: {\n                required: true,\n                type: Object\n            },\n        },\n        data: function () {\n            return {\n                phenotypes: []\n            }\n        },\n        watch: {\n            \'$route\': function (to, from) {\n                this.phenotypes = this.curation.phenotypes || [];\n            },\n        },\n        computed: {\n            usedPhenotypes: function () {\n                if (this.phenotypes.length > 0 && this.curation.phenotypes) {\n                    return this.phenotypes.filter(pheno => this.curation.phenotypes.indexOf(pheno.phenotypeMimNumber) > -1)\n                }\n                return this.phenotypes;\n            },\n            unusedPhenotypes: function () {\n                if (this.phenotypes.length > 0 && this.curation.phenotypes) {\n                    return this.phenotypes.filter(pheno => this.curation.phenotypes.indexOf(pheno.phenotypeMimNumber) < 0)\n                }\n                return this.phenotypes;\n            },\n        },\n        mounted: function () {\n            this.phenotypes = this.curation.phenotypes || [];\n        }\n    }\n<\/script>'],sourceRoot:""}]);const s=a},3704:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});var r=n(4432),o=n.n(r),i=n(2312),a=n.n(i)()(o());a.push([t.id,"tr.highlight td[data-v-63e7494f]{font-weight:700}","",{version:3,sources:["webpack://./resources/assets/js/components/Curations/StatusHistory.vue"],names:[],mappings:"AACA,iCACA,eACA",sourcesContent:['<style scoped>\n    tr.highlight td {\n        font-weight: bold;\n    }\n</style>\n<template>\n    <div class="curation-status-history">\n        <table class="table table-bordered table-small">\n            <tr>\n                <th>Status</th>\n                <th>Date</th>\n            </tr>\n            <tr \n                v-for="(status, idx) in orderedStatuses" \n                :key="status.pivot.id" \n                :class="{\'table-primary highlight\': (idx == 0)}"\n            >\n                <td>{{status.name}}</td>\n                <td>{{status.pivot.status_date | formatDate(\'YYYY-MM-DD\') }}</td>\n            </tr>\n        </table>\n    </div>\n</template>\n<script>\n    import moment from \'moment\'\n    import filters from \'../../filters\'\n    \n    export default {\n        props: {\n            curation: {\n                type: Object,\n                required: true\n            },\n        },\n        computed: {\n            /** THE STATUSES ORDERED BY THE NEWEST FIRST, ORDERED BASED ON STATUS_DATE DESC, UPDATED_AT DESC */\n            orderedStatuses: function () {\n                if (this.curation.curation_statuses) {\n                    return this.curation.curation_statuses.concat().sort((a, b) => {\n\n                        const dateA = moment(a.pivot.status_date);\n                        const dateB = moment(b.pivot.status_date);\n\n                        if (dateA.isSame(dateB)) {\n                            const updatedAtA = moment(a.pivot.updated_at);\n                            const updatedAtB = moment(b.pivot.updated_at);\n\n                            if (updatedAtA.isSame(updatedAtB)) {\n                                return 0;\n                            }\n                            return updatedAtA.isBefore(updatedAtB) ? 1 : -1;\n                        }\n\n                        return dateA.isBefore(dateB) ? 1 : -1;\n                    })\n                }\n                return [];\n            }\n        }\n    }\n<\/script>'],sourceRoot:""}]);const s=a},6788:(t,e,n)=>{"use strict";n.d(e,{c:()=>l});var r=n(7412),o=n.n(r);n(4112);const i={props:{curation:{type:Object,required:!0}},computed:{orderedClassifications:function(){return this.curation.classifications?this.curation.classifications.concat().sort((function(t,e){return o()(t.pivot.classification_date).isSame(e.pivot.classification_date)?t.id==e.id?0:t.id<e.id?-1:1:o()(t.pivot.classification_date).isBefore(e.pivot.classification_date)?1:-1})):[]}}};var a=n(4596),s=n.n(a),c=n(6084),u={insert:"head",singleton:!1};s()(c.c,u);c.c.locals;const l=(0,n(1456).c)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"curation-classification-history"},[n("table",{staticClass:"table table-bordered table-small"},[t._m(0),t._v(" "),t._l(t.orderedClassifications,(function(e,r){return n("tr",{key:e.pivot.id,class:{"table-primary highlight":0==r}},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(t._f("formatDate")(e.pivot.classification_date,"YYYY-MM-DD")))])])}))],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("Classification")]),t._v(" "),n("th",[t._v("Date")])])}],!1,null,"01539821",null).exports},1705:(t,e,n)=>{"use strict";n.d(e,{c:()=>u});var r=n(8416);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){var r;return r=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==o(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c={props:{curation:{required:!0,type:Object}},data:function(){return{}},computed:a(a({},(0,r.gV)({user:"getUser"})),{},{title:function(){var t="";return this.curation&&this.curation.gene_symbol&&(t+=this.curation.gene_symbol,this.curation.mondo_id&&(t+=" / "+this.curation.mondo_id),this.curation.expert_panel&&(t+=" for "+this.curation.expert_panel.name)),t}}),methods:a(a(a({},(0,r.ae)("curations",{destroyCuration:"destroyItem"})),(0,r.sR)("messages",["addInfo","addError"])),{},{deleteCuration:function(){var t=this;if(confirm("You're about to delete "+this.title+". This can not be undone.  Are you sure you want to continue?")){this.$router.push("/");var e=this.title;this.destroyCuration(this.curation.id).then((function(n){t.addInfo(e+" was successfully deleted.")})).catch((function(n){var r="There was a problem deleting"+e;403==n.response.status&&(r="You do not have permissions to delete curations.  Please contact an adminstrator to help you delete the curation."),t.addError(r)}))}}})};const u=(0,n(1456).c)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user.canDeleteCuration(t.curation)?n("button",{staticClass:"btn btn-danger",attrs:{id:"delete-curation-"+t.curation.id+"-btn"},on:{click:function(e){return t.deleteCuration(t.curation)}}},[t._t("default",[t._v("Delete")])],2):t._e()}),[],!1,null,null,null).exports},3840:(t,e,n)=>{"use strict";n.d(e,{c:()=>j});var r=n(4960),o=n(8416);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t,e,n){var r;return r=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==i(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const c={components:{ValidationError:r.c},props:{curation:{required:!0,type:Object}},data:function(){return{showModal:!1,categories:[],newUpload:{},errors:{},uploading:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,o.gV)({maxUploadSize:"getMaxUploadSize",supportedMimes:"getSupportedMimes"})),methods:{getUploadCategories:function(){var t=this;window.axios.get("/api/upload-categories").then((function(e){return t.categories=e.data.data}))},initNewUpload:function(){this.newUpload={name:"",upload_category_id:"",notes:""}},initErrors:function(){this.errors={}},clearForm:function(){this.initNewUpload(),this.initErrors()},prepopulateName:function(){""==this.newUpload.name&&(this.newUpload.name=this.$refs.uploadField.files[0].name)},uploadFile:function(t){var e=this;this.initErrors(),t.preventDefault();var n=new FormData;return n.append("curation_id",this.curation.id),n.append("name",this.newUpload.name),n.append("file",this.$refs.uploadField.files[0]),n.append("upload_category_id",this.newUpload.upload_category_id),n.append("notes",this.newUpload.notes),this.uploading=!0,window.axios.post("/api/curations/".concat(this.curation.id,"/uploads"),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.$emit("uploaded"),e.clearForm(),e.$nextTick((function(){return e.$refs.uploadModal.hide()}))})).catch((function(t){422!=t.response.status?413!=t.response.status?alert("There was an unkown problem with your file upload."):e.errors={file:["The file was too large"]}:e.errors=t.response.data.errors})).then((function(){e.uploading=!1}))},launchFileSelector:function(){this.$refs.uploadField.click()}},mounted:function(){this.getUploadCategories(),this.initNewUpload(),this.initErrors()}};var u=n(1456);const l=(0,u.c)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-2"},[n("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){t.showModal=!0}}},[t._v("Add Document")]),t._v(" "),n("b-modal",{ref:"uploadModal",attrs:{title:"Upload a Document","ok-disabled":t.uploading,"cancel-disabled":t.uploading,"ok-title":t.uploading?"Uploading...":"Upload"},on:{ok:t.uploadFile,cancel:t.clearForm},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("div",{staticClass:"form-row"},[n("label",{staticClass:"col-sm-2",attrs:{for:"file-field"}},[t._v("\n                File:\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-10"},[n("div",{staticClass:"d-flex justify-content-between"},[n("div",[n("input",{ref:"uploadField",staticClass:"form-control-file",attrs:{type:"file",id:"file-field",disabled:t.uploading},on:{change:function(e){return t.prepopulateName()}}})]),t._v(" "),n("div",[n("small",{directives:[{name:"b-toggle",rawName:"v-b-toggle.file-info-collapse",modifiers:{"file-info-collapse":!0}}],staticClass:"text-secondary material-icons cursor-pointer"},[t._v("info")])])]),t._v(" "),n("b-collapse",{attrs:{id:"file-info-collapse"}},[n("div",[n("small",{staticClass:"text-muted"},[t._v("Supported types: "+t._s(t.supportedMimes.join(", ")))])]),t._v(" "),n("div",[n("small",{staticClass:"text-muted"},[t._v("Max size: "+t._s(t.maxUploadSize))])])]),t._v(" "),n("validation-error",{attrs:{messages:t.errors.file}})],1)]),t._v(" "),n("div",{staticClass:"form-row"},[n("label",{staticClass:"col-sm-2",attrs:{for:"name"}},[t._v("Name:")]),t._v(" "),n("div",{staticClass:"col-sm-10"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.newUpload.name,expression:"newUpload.name"}],staticClass:"form-control form-control-sm",attrs:{type:"text",id:"name",maxlength:"255",disabled:t.uploading},domProps:{value:t.newUpload.name},on:{input:function(e){e.target.composing||t.$set(t.newUpload,"name",e.target.value)}}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.name}})],1)]),t._v(" "),t.categories.length>0?n("div",{staticClass:"form-row"},[n("label",{staticClass:"col-sm-2",attrs:{for:"category_id"}},[t._v("Category:")]),t._v(" "),n("div",{staticClass:"col-sm-10"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newUpload.upload_category_id,expression:"newUpload.upload_category_id"}],staticClass:"form-control form-control-sm",attrs:{name:"category_id",id:"category_id",disabled:t.uploading},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.newUpload,"upload_category_id",e.target.multiple?n:n[0])}}},[n("option",{attrs:{value:""}},[t._v("None")]),t._v(" "),t._l(t.categories,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}))],2),t._v(" "),n("validation-error",{attrs:{messages:t.errors.upload_category_id}})],1)]):t._e(),t._v(" "),n("div",{staticClass:"form-row"},[n("label",{staticClass:"col-sm-2",attrs:{for:"notes"}},[t._v("\n                Notes:\n            ")]),t._v(" "),n("div",{staticClass:"col-sm-10"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.newUpload.notes,expression:"newUpload.notes"}],staticClass:"form-control form-control-sm",attrs:{name:"notes",id:"notes",cols:"30",rows:"5",maxlegnth:"65535",disabled:t.uploading},domProps:{value:t.newUpload.notes},on:{input:function(e){e.target.composing||t.$set(t.newUpload,"notes",e.target.value)}}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.notes}})],1)])])],1)}),[],!1,null,null,null).exports;var d=n(9464);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(){p=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),s=new A(r||[]);return o(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",m="suspendedYield",v="executing",y="completed",b={};function _(){}function g(){}function w(){}var C={};u(C,a,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(N([])));O&&O!==n&&r.call(O,a)&&(C=O);var D=w.prototype=_.prototype=Object.create(C);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==f(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=h;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=d(e,n,r);if("normal"===u.type){if(o=r.done?y:m,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return g.prototype=w,o(D,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},E(j.prototype),u(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(D),u(D,c,"Generator"),u(D,a,(function(){return this})),u(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function h(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function m(t){return v.apply(this,arguments)}function v(){var t;return t=p().mark((function t(e){var n,r;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.where.curation_id,r="/api/curations/"+n+"/uploads",t.next=4,axios.get(r+(e?"?"+(0,d.c)(e):"")).then((function(t){return t.data.data}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})),v=function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){h(i,r,o,a,s,"next",t)}function s(t){h(i,r,o,a,s,"throw",t)}a(void 0)}))},v.apply(this,arguments)}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function b(){b=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),s=new A(r||[]);return o(a,"_invoke",{value:S(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",m="completed",v={};function _(){}function g(){}function w(){}var C={};u(C,a,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(N([])));O&&O!==n&&r.call(O,a)&&(C=O);var D=w.prototype=_.prototype=Object.create(C);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==y(l)&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=f;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=d(e,n,r);if("normal"===u.type){if(o=r.done?m:p,u.arg===v)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(y(e)+" is not iterable")}return g.prototype=w,o(D,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,u(t,c,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},E(j.prototype),u(j.prototype,s,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(D),u(D,c,"Generator"),u(D,a,(function(){return this})),u(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function _(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t,e,n){var r;return r=function(t,e){if("object"!=y(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==y(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const C={components:{DocumentUploader:l},props:{curation:{reqired:!0,type:Object}},data:function(){var t=this;return{showDetailedInfo:!1,loadingDocuments:!1,documents:[],currentDocument:null,filter:"",fields:[{key:"id",sortable:!0},{key:"name",sortable:!0},{key:"category.name",sortable:!0,label:"Category"},{key:"created_at",label:"Created",sortable:!0,formatter:function(e,n,r){return t.$options.filters.formatDate(e,"YYYY-MM-DD")}},{key:"uploader.name",label:"Uploaded by",sortable:!0},"action"],filteredFields:["name","id","category","uploader","uploader"]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,o.gV)({user:"getUser"})),watch:{curation:function(){this.getDocuments()}},methods:{getDocuments:function(){var t,e=this;return(t=b().mark((function t(){return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.curation.id){t.next=2;break}return t.abrupt("return");case 2:return e.loadingDocuments=!0,t.next=5,m({with:["category","uploader"],where:{curation_id:e.curation.id}});case 5:e.documents=t.sent,e.loadingDocuments=!1;case 7:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_(i,r,o,a,s,"next",t)}function s(t){_(i,r,o,a,s,"throw",t)}a(void 0)}))})()},showDetails:function(t){this.currentDocument=t,this.showDetailedInfo=!0},downloadFile:function(t){axios.get("/api/curations/"+this.curation.id+"/uploads/"+t.id+"/file",{responseType:"blob"}).then((function(e){console.log(e.data);var n=e.data,r=window.document.createElement("a"),o=window.URL.createObjectURL(n);r.href=o,r.download=t.name,window.document.body.append(r),r.click(),r.remove(),window.URL.revokeObjectURL(o)})).catch((function(t){if(!t.response||404!=t.response.status)throw t;alert("We couldn't seem to find the file you requested.")}))},deleteDocument:function(t){var e=this;confirm("Are you sure you want to delete the document "+t.name+"?")&&(this.documents.splice(this.documents.findIndex((function(e){return e.id=t.id})),1),axios.delete("/api/curations/"+this.curation.id+"/uploads/"+t.id).then((function(t){})).catch((function(t){e.getDocuments(),alert("There was a problem deleting the document.  Contact the administrator if the problem persists.")})))}},mounted:function(){this.getDocuments()}};function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function D(t,e,n){var r;return r=function(t,e){if("object"!=x(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==x(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const E={components:{DocumentUploader:l,DocumentsList:(0,u.c)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loadingDocuments?n("div",{staticClass:"alert alert-info"},[t._v("Loading...")]):t._e(),t._v(" "),t.loadingDocuments||0!=t.documents.length?t._e():n("div",{staticClass:"alert alert-light border"},[t._v("\n        No documents found\n    ")]),t._v(" "),t.documents.length>0?n("div",[n("div",{staticClass:"form-inline mb-1"},[n("label",{attrs:{for:"list-filter-input"}},[t._v("Filter:")]),t._v(" \n            "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"form-control form-control-sm",attrs:{type:"text"},domProps:{value:t.filter},on:{input:function(e){e.target.composing||(t.filter=e.target.value)}}})]),t._v(" "),n("b-table",{attrs:{fields:t.fields,items:t.documents,filter:t.filter,"filter-included-fields":t.filteredFields,stacked:"sm"},scopedSlots:t._u([{key:"cell(action)",fn:function(e){var r=e.item;return[n("a",{attrs:{href:"#",title:"Download document"},on:{click:function(e){return e.preventDefault(),t.downloadFile(r)}}},[n("i",{staticClass:"material-icons"},[t._v("cloud_download")])]),t._v(" "),n("a",{attrs:{href:"#",title:"Detailed information"},on:{click:function(e){return e.preventDefault(),t.showDetails(r)}}},[n("i",{staticClass:"material-icons"},[t._v("info")])]),t._v(" "),t.user.canEditCuration(t.curation)?n("a",{staticClass:"text-danger",attrs:{href:"#",title:"Delete document"},on:{click:function(e){return e.preventDefault(),t.deleteDocument(r)}}},[n("i",{staticClass:"material-icons"},[t._v("delete")])]):t._e()]}}],null,!1,2771667464)})],1):t._e(),t._v(" "),t.currentDocument?n("b-modal",{attrs:{"hide-footer":"",title:t.currentDocument.name,size:"lg"},model:{value:t.showDetailedInfo,callback:function(e){t.showDetailedInfo=e},expression:"showDetailedInfo"}},[n("dl",{staticClass:"row"},[n("dt",{staticClass:"col-md-2"},[t._v("Name:")]),t._v(" "),n("dd",{staticClass:"col-md-10"},[t._v(t._s(t.currentDocument.name))]),t._v(" "),n("dt",{staticClass:"col-md-2"},[t._v("File name:")]),t._v(" "),n("dd",{staticClass:"col-md-10"},[t._v(t._s(t.currentDocument.file_name?t.currentDocument.file_name:"--"))]),t._v(" "),n("dt",{staticClass:"col-md-2"},[t._v("Category:")]),t._v(" "),n("dd",{staticClass:"col-md-10"},[t._v(t._s(t.currentDocument.category?t.currentDocument.category.name:"--"))]),t._v(" "),n("dt",{staticClass:"col-md-2"},[t._v("Date uploaded:")]),t._v(" "),n("dd",{staticClass:"col-md-10"},[t._v(t._s(t._f("formatDate")(t.currentDocument.created_at,"YYYY-MM-DD")))]),t._v(" "),n("dt",{staticClass:"col-md-2"},[t._v("Uploaded by:")]),t._v(" "),n("dd",{staticClass:"col-md-10"},[t._v(t._s(t.currentDocument.uploader?t.currentDocument.uploader.name:"--"))]),t._v(" "),n("dt",{staticClass:"col-md-2"},[t._v("Notes:")]),t._v(" "),n("dd",{staticClass:"col-md-10"},[t._v(t._s(t.currentDocument.notes?t.currentDocument.notes:"--"))])]),t._v(" "),n("div",{staticClass:"mt-2"},[n("button",{staticClass:"btn btn-primary text-middle btn-sm",attrs:{title:"Download document"},on:{click:function(e){return t.downloadFile(t.currentDocument)}}},[t._v("\n                Download document\n            ")])])]):t._e()],1)}),[],!1,null,null,null).exports},props:{curation:{reqired:!0,type:Object}},data:function(){return{}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,o.gV)({user:"getUser"})),methods:{}};const j=(0,u.c)(E,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",[t.user.canEditCuration(t.curation)?n("document-uploader",{staticClass:"float-right",attrs:{curation:t.curation},on:{uploaded:function(e){return t.$refs.docList.getDocuments()}}}):t._e(),t._v("\n        Documents\n    ")],1),t._v(" "),n("documents-list",{ref:"docList",attrs:{curation:t.curation}})],1)}),[],!1,null,null,null).exports},4288:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>A});var r=n(8416);n(1956);const o={props:{geneSymbol:{required:!0},curation:{required:!0,type:Object}},data:function(){return{phenotypes:[]}},watch:{$route:function(t,e){this.phenotypes=this.curation.phenotypes||[]}},computed:{usedPhenotypes:function(){var t=this;return this.phenotypes.length>0&&this.curation.phenotypes?this.phenotypes.filter((function(e){return t.curation.phenotypes.indexOf(e.phenotypeMimNumber)>-1})):this.phenotypes},unusedPhenotypes:function(){var t=this;return this.phenotypes.length>0&&this.curation.phenotypes?this.phenotypes.filter((function(e){return t.curation.phenotypes.indexOf(e.phenotypeMimNumber)<0})):this.phenotypes}},mounted:function(){this.phenotypes=this.curation.phenotypes||[]}};var i=n(4596),a=n.n(i),s=n(592),c={insert:"head",singleton:!1};a()(s.c,c);s.c.locals;var u=n(1456);const l=(0,u.c)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-container row"},[t.phenotypes.length>0?n("div",{staticClass:" col-lg-8"},[n("table",{staticClass:"table table-sm table-xs mb-0"},[t._m(0),t._v(" "),n("tbody",t._l(t.phenotypes,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.mim_number))]),t._v(" "),n("td",[t._v(t._s(e.name))])])})),0)])]):n("div",{staticClass:"col"},[t._v("\n        No phenotypes in this curation\n    ")])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("th",[t._v("MIM Number")]),t._v(" "),n("th",{staticStyle:{width:"80%"}},[t._v("Phenotype")])])}],!1,null,"2884e836",null).exports;const d={name:"NotesList",components:{InputRow:n(8032).c},props:{notes:{type:Array,required:!0}},data:function(){return{showAddForm:!1,newNoteContent:null}}};const f=(0,u.c)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{staticClass:"d-flex justify-content-between"},[n("div",[t._t("title",[t._v("Notes")])],2)]),t._v(" "),0==t.notes.length?n("div",{staticClass:"alert alert-light border"},[t._v("\n        Not administrative notes for this record.\n    ")]):t._e(),t._v(" "),t.notes.length>0?n("table",{staticClass:"table table-striped"},[t._m(0),t._v(" "),n("tbody",t._l(t.notes,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.topic?e.topic.toUpperCase()+": ":"")+" "+t._s(e.content))]),t._v(" "),n("td",[t._v(t._s(e.author.name))]),t._v(" "),n("td",[t._v(t._s(t._f("formatDate")(e.created_at)))])])})),0)]):t._e()])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("thead",[n("tr",[n("th",[t._v("Note")]),t._v(" "),n("th",[t._v("Author")]),t._v(" "),n("th",[t._v("Created")])])])}],!1,null,null,null).exports;var p=n(7412),h=n.n(p);n(4112);const m={props:{items:{type:Array,required:!0},itemLabel:{type:String,required:!0},dateField:{type:String,required:!0},indexAttribute:{type:String,required:!1,default:null}},computed:{orderedItems:function(){var t=this;return this.items?this.items.concat().sort((function(e,n){return h()(e.pivot[t.dateField]).isSame(n.pivot[t.dateField])?e.id==n.id?0:e.id<n.id?1:-1:h()(e.pivot[t.dateField]).isBefore(n.pivot[t.dateField])?1:-1})):[]}}};var v=n(6036),y={insert:"head",singleton:!1};a()(v.c,y);v.c.locals;const b=(0,u.c)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"table table-bordered table-small"},[n("tr",[n("th",[t._v(t._s(t.itemLabel))]),t._v(" "),n("th",[t._v("Date")])]),t._v(" "),t._l(t.orderedItems,(function(e,r){return n("tr",{key:t.indexAttribute?e[t.indexAttribute]:r,class:{"table-primary highlight":0==r}},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(t._f("formatDate")(e.pivot[t.dateField],"YYYY-MM-DD")))])])}))],2)])}),[],!1,null,"0ab4573c",null).exports;var _=n(3904),g=n(6788),w=n(1705),C=n(3840),x=n(1112),O=n(716);const D={props:{value:{required:!0,type:Boolean},showLabel:{required:!1,default:"Show"},hideLabel:{required:!1,default:"Hide"}},data:function(){return{}},computed:{otherStateLabel:function(){return this.value?this.hideLabel:this.showLabel}},methods:{toggle:function(){this.$emit("input",!this.value)}}};const E=(0,u.c)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"btn btn-sm"},[n("small",[n("small",{on:{click:t.toggle}},[t._v("\n            "+t._s(t.otherStateLabel)+"\n        ")])])])}),[],!1,null,null,null).exports;function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e,n){var r;return r=function(t,e){if("object"!=j(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==j(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const L={props:["id"],components:{PhenotypeList:l,CurationStatusHistory:_.c,DeleteButton:w.c,ClassificationHistory:g.c,DocumentsCard:C.c,TransferCurationControl:x.c,GciLink:O.c,HistoryTable:b,ToggleButton:E,NotesList:f},data:function(){return{showOwnerHistory:!1,showStatusHistory:!1,showClassificationHistory:!1,loading:!0}},watch:{$route:function(t,e){this.loadCuration()}},computed:P(P(P({},(0,r.gV)({user:"getUser"})),(0,r.gV)("curations",{curations:"Items",getCuration:"getItemById",curation:"currentItem"})),{},{statusHistoryButtonText:function(){return this.showStatusHistory?"Hide history":"Show history"},classificationButtonText:function(){return this.showClassificationHistory?"Hide history":"Show history"},title:function(){var t="Curation: ";return this.curation&&this.curation.gene_symbol&&(t+=this.curation.gene_symbol,this.curation.mondo_id&&(t+=" / "+this.curation.mondo_id),this.curation.expert_panel&&(t+=" for "+this.curation.expert_panel.name)),t},mondoUrl:function(){if(this.curation.mondo_id)return"https://www.ebi.ac.uk/ols/ontologies/mondo/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2FMONDO_".concat(this.curation.mondo_id.substring(6))}}),methods:P(P({},(0,r.ae)("curations",{fetchCuration:"fetchItem"})),{},{loadCuration:function(){var t=this;this.loading=!0,this.fetchCuration(this.id).then((function(e){t.loading=!1})).catch((function(e){t.loading=!1}))}}),mounted:function(){this.loadCuration()}};const A=(0,u.c)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"curation-show-container"},[n("div",[n("router-link",{attrs:{to:"/curations"}},[t._v("\n            < Back to curations\n        ")])],1),t._v(" "),n("transition",{attrs:{name:"fade"}},[t.loading?t._e():n("b-card",{key:"curation-details",staticStyle:{"max-heigh":"1000px"},attrs:{id:"show-curation"}},[n("template",{slot:"header"},[n("div",{staticClass:"d-float justify-content-between"},[n("h3",[t._v(" "+t._s(t.title))]),t._v(" "),t.loading?t._e():n("div",{staticClass:"d-flex space-x-1"},[t.user.canEditCuration(t.curation)?n("router-link",{staticClass:"btn btn-secondary btn-sm",attrs:{id:"edit-curation-"+t.curation.id+"-btn",to:"/curations/"+t.curation.id+"/edit"}},[t._v("\n                            Edit\n                        ")]):t._e(),t._v(" "),n("delete-button",{staticClass:"btn btn-sm",attrs:{curation:t.curation}}),t._v(" "),t.$store.state.features.transferEnabled?n("transfer-curation-control",{attrs:{curation:t.curation}}):t._e()],1)])]),t._v(" "),this.curations?n("div",[n("div",{attrs:{id:"info"}},[n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Precuration ID:")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v("\n                            "+t._s(t.curation.id)+"\n                        ")])]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Gene Symbol:")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v(t._s(t.curation.gene_symbol)+" - "),t.curation.name?n("span",[t._v(t._s("hgnc:"+t.curation.name))]):t._e(),t._v(" ("),t.curation.hgnc_id?n("small",[t._v(t._s("hgnc:"+t.curation.hgnc_id))]):t._e(),t._v(")")])]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("\n                            Mode Of Inheritance:\n                        ")]),t._v(" "),n("div",{staticClass:"col-md"},[t.curation.mode_of_inheritance?n("div",[t._v("\n                                "+t._s(t.curation.mode_of_inheritance.name)+" - ("+t._s(t.curation.mode_of_inheritance.hp_id)+")\n                            ")]):n("div",[t._v("--")])])]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Disease Entity:")]),t._v(" "),n("div",{staticClass:"col-md"},[t.curation.mondo_id?n("div",[n("external-link",{staticClass:"external",attrs:{href:t.mondoUrl,target:"mondo"}},[t.curation.disease&&t.curation.disease.name?n("span",[t._v("\n                                        "+t._s(t.curation.disease.name?t.curation.disease.name:"")+" - \n                                    ")]):t._e(),t._v("\n                                    "+t._s(t.curation.mondo_id?t.curation.mondo_id:"--")+"\n                                ")])],1):t._e()])]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Expert Panel:")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v("\n                            "+t._s(t.curation.expert_panel?t.curation.expert_panel.name:"--")+"\n                            "),t.$store.state.features.transferEnabled?n("div",[n("toggle-button",{attrs:{"show-label":"Show history","hide-label":"Hide history"},model:{value:t.showOwnerHistory,callback:function(e){t.showOwnerHistory=e},expression:"showOwnerHistory"}}),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("history-table",{directives:[{name:"show",rawName:"v-show",value:t.showOwnerHistory,expression:"showOwnerHistory"}],attrs:{items:t.curation.expert_panels,"item-label":"Expert Panel","date-field":"start_date","index-attribute":"id"}})],1)],1):t._e()])]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Curator:")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v(t._s(t.curation.curator?t.curation.curator.name:"--"))])]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Curation Type:")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v("\n                            "+t._s(t.curation.curation_type?t.curation.curation_type.description:"--")+"\n                        ")])]),t._v(" "),n("div",{staticClass:"row mt-4"},[n("strong",{staticClass:"col-md-3"},[t._v("Phenotypes:")]),t._v(" "),n("phenotype-list",{staticClass:"col-md",attrs:{curation:t.curation,"gene-symbol":t.curation.gene_symbol}})],1),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Rationale:")]),t._v(" "),n("div",{staticClass:"col-md"},[n("ul",{staticClass:"list-inline"},t._l(t.curation.rationales,(function(e,r){return n("li",{key:e.id,staticClass:"list-inline-item"},[t._v("\n                                    "+t._s(e.name)),r+1<t.curation.rationales.length?n("span",[t._v(",")]):t._e()])})),0)])]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("PMIDS")]),t._v(" "),t.curation.pmids?n("div",{staticClass:"col-md"},[n("ul",{staticClass:"list-inline"},t._l(t.curation.pmids,(function(e,r){return n("li",{key:r,staticClass:"list-inline-item"},[t._v("\n                                    "+t._s(e)),t.curation.pmids&&t.curation.pmids.length>r+1?n("span",[t._v(",")]):t._e()])})),0)]):t._e()]),t._v(" "),n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("Notes on Rationale")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v("\n                            "+t._s(t.curation.rationale_notes)+"\n                        ")])]),t._v(" "),n("div",{staticClass:"row mt-1"},[n("strong",{staticClass:"col-md-3"},[t._v("Disease entity notes:")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v(t._s(t.curation.disease_entity_notes?t.curation.disease_entity_notes:"--"))])]),t._v(" "),n("div",{staticClass:"row mt-3"},[n("strong",{staticClass:"col-md-3"},[t._v("Current Status:")]),t._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"mb-2"},[t._v("\n                                "+t._s(t.curation.current_status?t.curation.current_status.name:"No status set")+" \n                                "),n("button",{staticClass:"btn btn-sm"},[n("small",[n("small",{on:{click:function(e){t.showStatusHistory=!t.showStatusHistory}}},[t._v("\n                                            "+t._s(t.statusHistoryButtonText)+"\n                                        ")])])])]),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("history-table",{directives:[{name:"show",rawName:"v-show",value:t.showStatusHistory,expression:"showStatusHistory"}],attrs:{items:t.curation.curation_statuses,"item-label":"Status","date-field":"status_date"}})],1)],1)]),t._v(" "),t.curation.gdm_uuid?n("div",{staticClass:"row mt-2"},[n("strong",{staticClass:"col-md-3"},[t._v("GCI ID:")]),t._v(" "),n("div",{staticClass:"col-md"},[n("gci-link",{attrs:{curation:t.curation}})],1)]):t._e(),t._v(" "),n("div",{staticClass:"row mt-3"},[n("strong",{staticClass:"col-md-3"},[t._v("Current Classification:")]),t._v(" "),n("div",{staticClass:"col-md-6"},[n("div",{staticClass:"mb-2"},[t._v("\n                                "+t._s(t.curation.current_classification?t.curation.current_classification.name:"Not yet classified")+" \n                                "),t.curation.current_classification?n("button",{staticClass:"btn btn-sm"},[n("small",[n("small",{on:{click:function(e){t.showClassificationHistory=!t.showClassificationHistory}}},[t._v("\n                                            "+t._s(t.classificationButtonText)+"\n                                        ")])])]):t._e()]),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",[n("classification-history",{directives:[{name:"show",rawName:"v-show",value:t.showClassificationHistory,expression:"showClassificationHistory"}],attrs:{curation:t.curation}})],1)])],1)]),t._v(" "),n("div",{staticClass:"row mt-1"},[n("strong",{staticClass:"col-md-3"},[t._v("Notes:")]),t._v(" "),n("div",{staticClass:"col-md"},[t._v(t._s(t.curation.curation_notes?t.curation.curation_notes:"--"))])])]),t._v(" "),n("hr"),t._v(" "),n("documents-card",{attrs:{curation:t.curation}}),t._v(" "),n("hr"),t._v(" "),n("notes-list",{attrs:{notes:t.curation.notes}},[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("Administrative Notes")])])],1):t._e()],2),t._v(" "),t.loading?n("div",{key:"loading",staticClass:"alert alert-secondary lead text-center mt-4"},[t._v("\n            Loading...\n        ")]):t._e()],1)],1)}),[],!1,null,null,null).exports},3904:(t,e,n)=>{"use strict";n.d(e,{c:()=>l});var r=n(7412),o=n.n(r);n(4112);const i={props:{curation:{type:Object,required:!0}},computed:{orderedStatuses:function(){return this.curation.curation_statuses?this.curation.curation_statuses.concat().sort((function(t,e){var n=o()(t.pivot.status_date),r=o()(e.pivot.status_date);if(n.isSame(r)){var i=o()(t.pivot.updated_at),a=o()(e.pivot.updated_at);return i.isSame(a)?0:i.isBefore(a)?1:-1}return n.isBefore(r)?1:-1})):[]}}};var a=n(4596),s=n.n(a),c=n(3704),u={insert:"head",singleton:!1};s()(c.c,u);c.c.locals;const l=(0,n(1456).c)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"curation-status-history"},[n("table",{staticClass:"table table-bordered table-small"},[t._m(0),t._v(" "),t._l(t.orderedStatuses,(function(e,r){return n("tr",{key:e.pivot.id,class:{"table-primary highlight":0==r}},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(t._f("formatDate")(e.pivot.status_date,"YYYY-MM-DD")))])])}))],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("th",[t._v("Status")]),t._v(" "),n("th",[t._v("Date")])])}],!1,null,"63e7494f",null).exports},1112:(t,e,n)=>{"use strict";n.d(e,{c:()=>h});var r=n(8416);var o=n(4960),i=n(8032),a=n(716);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){c=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),s=new A(r||[]);return o(a,"_invoke",{value:S(t,n,s)}),a}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h="suspendedStart",m="suspendedYield",v="executing",y="completed",b={};function _(){}function g(){}function w(){}var C={};d(C,a,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(N([])));O&&O!==n&&r.call(O,a)&&(C=O);var D=w.prototype=_.prototype=Object.create(C);function E(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function n(o,i,a,c){var u=p(t[o],t,i);if("throw"!==u.type){var l=u.arg,d=l.value;return d&&"object"==s(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function S(e,n,r){var o=h;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===b)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===h)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=p(e,n,r);if("normal"===u.type){if(o=r.done?y:m,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=p(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function N(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(s(e)+" is not iterable")}return g.prototype=w,o(D,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:g,configurable:!0}),g.displayName=d(w,l,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,d(t,l,"GeneratorFunction")),t.prototype=Object.create(D),t},e.awrap=function(t){return{__await:t}},E(j.prototype),d(j.prototype,u,(function(){return this})),e.AsyncIterator=j,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new j(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(D),d(D,l,"Generator"),d(D,a,(function(){return this})),d(D,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=N,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(L),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),b}},e}function u(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){var r;return r=function(t,e){if("object"!=s(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==s(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const p={components:{ValidationError:o.c,InputRow:i.c,GciLink:a.c},props:{curation:{type:Object,required:!0}},emits:["submited","canceled"],data:function(){return{showTransferForm:!1,newExpertPanel:{coordinators:[]},startDate:null,notes:null,isHistorical:null,endDate:null,errors:{},showConfirmation:!1}},computed:d(d(d({},(0,r.gV)({user:"getUser"})),(0,r.gV)("panels",{panels:"Items"})),{},{filteredPanels:function(){var t=this;return this.panels.filter((function(e){return e.id!=t.curation.expert_panel_id}))},inGci:function(){return Boolean(this.curation.gdm_uuid)}}),methods:d(d(d({},(0,r.ae)("panels",{getAllPanels:"getAllItems",getPanel:"getItem"})),(0,r.ae)("curations",{updateOwner:"updateOwner"})),{},{confirmTransfer:function(){this.showConfirmation=!0},transferCuration:function(){var t,e=this;return(t=c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.updateOwner({curation:e.curation,expertPanelId:e.newExpertPanel.id,startDate:e.startDate,notes:e.notes});case 3:e.showTransferForm=!1,e.showConfirmation=!1,e.initFormData(),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),(n=t.t0).response&&422==n.response.status&&n.response.data.errors&&(e.errors=t.t0.response.data.errors),e.showConfirmation=!1;case 12:case"end":return t.stop()}var n}),t,null,[[0,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,s,"next",t)}function s(t){u(i,r,o,a,s,"throw",t)}a(void 0)}))})()},cancel:function(){this.showTransferForm=!1,this.initFormData()},initFormData:function(){this.newExpertPanel={coordinators:[]},this.startDate=null,this.isHistorical=null,this.endDate=null,this.errors={},this.showConfirmation=!1,this.notes=null},fieldError:function(t){return this.errors&&this.errors[t]&&this.errors[t].length>0}}),mounted:function(){this.getAllPanels({with:["coordinators"],sort:{field:"name",dir:"asc"}})}};const h=(0,n(1456).c)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.user.canEditPanelCurations(t.curation.expert_panel)?n("button",{staticClass:"btn btn-sm bg-white border",on:{click:function(e){t.showTransferForm=!0}}},[t._v("\n        Transfer Curation\n    ")]):t._e(),t._v(" "),n("b-modal",{attrs:{title:"Transfer Curation Ownership","hide-footer":!0,size:"lg"},model:{value:t.showTransferForm,callback:function(e){t.showTransferForm=e},expression:"showTransferForm"}},[n("div",[n("div",{staticClass:"alert alert-info"},[t._v("\n                    Before transfering this record, be sure that you have contacted the coordinator receiving the curation.\n                ")]),t._v(" "),n("input-row",{attrs:{label:"Transfer to:",errors:t.errors.expert_panel_id}},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.newExpertPanel,expression:"newExpertPanel"}],staticClass:"form-control form-control-sm w-75",attrs:{id:"expert-panel-select"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.newExpertPanel=e.target.multiple?n:n[0]}}},[n("option",{domProps:{value:null}},[t._v("Select...")]),t._v(" "),t._l(t.filteredPanels,(function(e){return n("option",{key:e.id,domProps:{value:e}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2)]),t._v(" "),n("input-row",{attrs:{errors:t.errors.start_date,label:"Transfer date",type:"date"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),t._v(" "),n("input-row",{attrs:{errors:t.errors.notes,label:"Notes"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.notes,expression:"notes"}],staticClass:"form-control",attrs:{cols:"60",rows:"5"},domProps:{value:t.notes},on:{input:function(e){e.target.composing||(t.notes=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"mt-1 border-top pt-3 text-right"},[n("button",{staticClass:"btn btn-secondary",on:{click:t.cancel}},[t._v("Cancel")]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.confirmTransfer()}}},[t._v("Transfer Curation")])])],1)]),t._v(" "),n("b-modal",{attrs:{title:"Confirm Curation Transfer","hide-footer":!0},model:{value:t.showConfirmation,callback:function(e){t.showConfirmation=e},expression:"showConfirmation"}},[n("div",{staticClass:"alert alert-info"},[n("div",{staticClass:"lead"},[t._v("You are about to transfer this curation to "+t._s(t.newExpertPanel.name)+".")]),t._v("\n            \n            Please be sure that you have communicated with the EP coordinator(s) before you continue.\n            "),n("ul",t._l(t.newExpertPanel.coordinators,(function(e){return n("li",{key:e.id},[t._v("\n                    "+t._s(e.name)+" <"),n("a",{attrs:{href:"mailto:"+e.email}},[t._v(t._s(e.email))]),t._v(">\n                ")])})),0)]),t._v(" "),n("div",{staticClass:"mt-1 border-top pt-3 text-right"},[n("button",{staticClass:"btn btn-secondary",on:{click:t.cancel}},[t._v("Cancel")]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.transferCuration}},[t._v("Transfer Curation")])])])],1)}),[],!1,null,null,null).exports},4960:(t,e,n)=>{"use strict";n.d(e,{c:()=>o});const r={props:["messages"],computed:{hasErrors:function(){return void 0!==this.messages}}};const o=(0,n(1456).c)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.hasErrors,expression:"hasErrors"}],staticClass:"text-danger mt-1"},t._l(t.messages,(function(e,r){return n("div",{key:r},[n("small",[t._v(t._s(e))])])})),0)])}),[],!1,null,null,null).exports},8032:(t,e,n)=>{"use strict";n.d(e,{c:()=>s});const r={props:{errors:{type:Array,required:!0}}};var o=n(1456);const i={props:{value:{required:!1,default:null}},emits:["update:modelValue"],data:function(){return{}},computed:{formattedDate:function(){if(!this.value)return null;var t=this.formatDate(this.value);return console.log(t),t}},methods:{setDate:function(t){var e=new Date(Date.parse(t.target.value)),n=new Date(e.getTime()+60*e.getTimezoneOffset()*1e3);this.$emit("input",n)},formatDate:function(t){var e=new Date(t),n=""+(e.getMonth()+1),r=""+e.getDate(),o=e.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[o,n,r].join("-")}}};const a={components:{InputErrors:(0,o.c)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"text-danger list-unstyled pt-0 mt-0"},t._l(t.errors,(function(e){return n("li",{key:e},[t._v(t._s(e))])})),0)}),[],!1,null,null,null).exports,DateInput:(0,o.c)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.formattedDate},on:{input:t.setDate}})])}),[],!1,null,null,null).exports},props:{vertical:{type:Boolean,default:!1},errors:{type:Array,required:!1,default:function(){return[]}},label:{type:String,required:!1},type:{type:String,required:!1,default:"text"},value:{required:!1,default:null},placeholder:{required:!1,value:null}},emits:["update:modelValue"],computed:{colon:function(){return this.label&&[":",";",".","?","!"].includes(this.label.substr(-1))?"":":"},hasErrors:function(){return this.errors.length>0}},methods:{emitValue:function(t){console.log(t),this.$emit("input",t)}}};const s=(0,o.c)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"my-3",class:{"d-flex":!t.vertical}},[n("div",{class:{"w-25":!t.vertical,"my-1":t.vertical}},[t.label?t._t("label",[n("label",{class:{"text-red-800":t.hasErrors}},[t._v(t._s(t.label)+t._s(t.colon))])]):t._e()],2),t._v(" "),n("div",[t._t("default",["date"==t.type?n("date-input",{attrs:{value:t.value},on:{input:t.emitValue}}):n("input",{attrs:{type:t.type,placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){return t.$emit("input",e.target.value)}}})]),t._v(" "),n("input-errors",{attrs:{errors:t.errors}})],2)])])}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=CurationShow.a9bd11d59bfb9535.js.map