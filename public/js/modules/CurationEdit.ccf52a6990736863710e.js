(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{f2aF:function(t,e,a){"use strict";a.r(e);var n=a("L2JU"),i=a("PwNb"),o=a("vlNi"),r=a.n(o),s={data:function(){return{phenotypes:[],phenotypesLoaded:!1}},computed:{loading:function(){return this.$store.getters.loading}},methods:{fetchPhenotypes:function(t){var e=this;return t?r.a.gene(t).then((function(t){e.phenotypes=t.data.phenotypes,e.phenotypesLoaded=!0})).catch((function(t){console.error(t)})):new Promise((function(t,e){t()}))}}},u=a("EzaY"),c=a("ttp2"),l={components:{},data:function(){return{}},methods:{}},d=a("KHd+"),p=Object(d.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.getters.omimLoading,expression:"$store.getters.omimLoading"}],staticClass:"alert alert-info"},[this._v("\n        Loading data from OMIM...\n    ")])])}),[],!1,null,null,null).exports,h={mixins:[i.a,s],components:{CriteriaTable:u.a,ValidationError:c.a,OmimLoading:p},data:function(){return{page:"curation-types",curationTypes:[],fields:[{key:"phenotype",sortable:!0},{key:"phenotypeMimNumber",sortable:!0},{key:"phenotypeInheritance",sortable:!0,label:"Inheritance"}]}},watch:{updatedCuration:function(t,e){t!=e&&(t.gene_symbol==e.gene_symbol&&t.curation_type_id==e.curation_type_id||this.fetchPhenotypes(this.updatedCuration.gene_symbol),this.updatedCuration.addingCurationType=1)}},computed:{options:function(){return this.phenotypesLoaded&&0==this.phenotypes.length&&null===this.updatedCuration.curation_type_id?(this.updatedCuration.curation_type_id=2,[]):1==this.phenotypes.length?this.curationTypes.filter((function(t){return"lumped"!=t.name})).map((function(t){return{text:t.description,value:t.id}})):this.curationTypes.map((function(t){return{text:t.description,value:t.id}}))}},methods:{fetchCurationTypes:function(){var t=this;window.axios.get("/api/curation-types").then((function(e){t.curationTypes=e.data}))}},mounted:function(){this.fetchCurationTypes()}},m=Object(d.a)(h,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"curation-curation-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.phenotypes.length&&!t.loading,expression:"phenotypes.length == 0 && !loading"}]},[a("div",{staticClass:"alert alert-secondary clearfix"},[a("p",[t._v("The gene "),a("strong",[t._v(t._s(t.updatedCuration.gene_symbol))]),t._v(" is not associated with a disease entity per OMIM at this time.")])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8"},[a("omim-loading"),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.phenotypes.length>0,expression:"phenotypes.length > 0"}]},[a("b-table",{attrs:{striped:"",hover:"",items:t.phenotypes,fields:t.fields,stacked:"sm",small:"",bordered:""}}),t._v(" "),a("div",{staticClass:"form-group"},[a("label",[a("strong",[t._v("How would you like to proceed?")])]),t._v(" "),a("b-form-radio-group",{attrs:{id:"btnradios2",size:"lg",options:t.options,stacked:"",name:"radioBtnOutline"},model:{value:t.updatedCuration.curation_type_id,callback:function(e){t.$set(t.updatedCuration,"curation_type_id",e)},expression:"updatedCuration.curation_type_id"}}),t._v(" "),a("validation-error",{attrs:{messages:t.errors.curation_type_id}})],1)],1)])],1),t._v(" "),a("div",{staticClass:"col-lg-4"},[a("criteria-table")],1)])])}),[],!1,null,null,null).exports,f=a("0R+v");function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var C={components:{CriteriaTable:u.a,CurationNotifications:f.a,ValidationError:c.a},props:["disabled"],mixins:[i.a,s],data:function(){return{page:"phenotypes",phenotypes:[],updatedCuration:{},fields:[{key:"phenotype",sortable:!0},{key:"phenotypeMimNumber",sortable:!0},{key:"phenotypeInheritance",sortable:!0,label:"Inheritance"},{key:"checkbox",tdClass:"text-right w-10",sortable:!1,label:" ",formatter:function(t,e,a){return{mim_number:a.phenotypeMimNumber,name:a.phenotype}}}],message:null}},watch:{updatedCuration:function(t,e){var a=this;t.gene_symbol!=e.gene_symbol&&this.fetchPhenotypes(this.updatedCuration.gene_symbol).then((function(t){a.phenotypes&&1==a.phenotypes.length&&1==a.updatedCuration.curation_type_id&&a.updatedCuration.phenotypes&&0==a.updatedCuration.phenotypes.length&&(Vue.set(a.updatedCuration.phenotypes,0,{mim_number:a.phenotypes[0].phenotypeMimNumber,name:a.phenotypes[0].phenotype}),a.message="We have preselected the phenotype because you indicated you are curating "+a.updatedCuration.gene_symbol+" with this single disease entity")}))}},computed:y(y({},Object(n.c)("rationales",{rationales:"Items"})),{},{showPmids:function(){},loading:function(){return this.$store.getters.loading},showTable:function(){return 2!=this.updatedCuration.curation_type_id&&3!=this.updatedCuration.curation_type_id&&this.phenotypes.length>0},showRationale:function(){return(!this.updatedCuration.curation_type||1!=this.updatedCuration.curation_type.id||1!=this.phenotypes.length)&&0!=this.phenotypes.length}})},g=Object(d.a)(C,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"component-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-8"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading&&t.phenotypes.length<1,expression:"loading && phenotypes.length < 1"}],staticClass:"alert alert-info"},[t._v("Loading phenotype information...")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading||t.phenotypes.length>0,expression:"!loading || phenotypes.length > 0"}]},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.phenotypes.length,expression:"phenotypes.length == 0"}],staticClass:"alert alert-secondary clearfix"},[a("p",[t._v("The gene "),a("strong",[t._v(t._s(t.updatedCuration.value))]),t._v(" is not associated with a disease entity per OMIM at this time.")])]),t._v(" "),a("b-table",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],attrs:{items:t.phenotypes,fields:t.fields,stacked:"sm",striped:"",hover:"",small:""},scopedSlots:t._u([{key:"head(checkbox)",fn:function(e){return[t._v("\n                            \n                    ")]}},{key:"cell(checkbox)",fn:function(e){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.phenotypes,expression:"updatedCuration.phenotypes"}],staticClass:"form-check-input form-check-input-lg",attrs:{type:"checkbox",disabled:t.disabled},domProps:{value:e.value,checked:Array.isArray(t.updatedCuration.phenotypes)?t._i(t.updatedCuration.phenotypes,e.value)>-1:t.updatedCuration.phenotypes},on:{change:function(a){var n=t.updatedCuration.phenotypes,i=a.target,o=!!i.checked;if(Array.isArray(n)){var r=e.value,s=t._i(n,r);i.checked?s<0&&t.$set(t.updatedCuration,"phenotypes",n.concat([r])):s>-1&&t.$set(t.updatedCuration,"phenotypes",n.slice(0,s).concat(n.slice(s+1)))}else t.$set(t.updatedCuration,"phenotypes",o)}}})]}}])}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"alert alert-info"},[t._v(t._s(t.message))])],1),t._v(" "),t.showRationale?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"rationale_id"}},[t._v("What is your rationale for this curation?")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.rationales,expression:"updatedCuration.rationales"}],staticClass:"form-control",staticStyle:{height:"8.5em"},attrs:{multiple:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.updatedCuration,"rationales",e.target.multiple?a:a[0])}}},t._l(t.rationales,(function(e){return a("option",{key:e.id,domProps:{value:e,selected:t.updatedCuration.rationales.map((function(t){return t.id})).indexOf(e.id)>-1}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])})),0),t._v(" "),a("validation-error",{attrs:{messages:t.errors.rationales}})],1):t._e(),t._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:100==t.updatedCuration.rationale_id,expression:"updatedCuration.rationale_id == 100"}],staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.rationale_other,expression:"updatedCuration.rationale_other"}],staticClass:"form-control",attrs:{placeholder:"Other rationale details"},domProps:{value:t.updatedCuration.rationale_other},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"rationale_other",e.target.value)}}}),t._v(" "),a("validation-error",{attrs:{messages:t.errors.rationale_other}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3!=t.updatedCuration.curation_type_id,expression:"updatedCuration.curation_type_id != 3"}],staticClass:"form-group"},[a("label",{attrs:{for:"pmids"}},[t._v("Supporting PMIDS:")]),t._v(" "),a("small",[t._v("comma separated list")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.pmids,expression:"updatedCuration.pmids"}],staticClass:"form-control",attrs:{id:"pmids",placeholder:"18183754, 123451, 1231231"},domProps:{value:t.updatedCuration.pmids},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"pmids",e.target.value)}}}),t._v(" "),a("validation-error",{attrs:{messages:t.errors.pmids}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.updatedCuration.curation_type_id,expression:"updatedCuration.curation_type_id == 3"}],staticClass:"form-group"},[a("label",{attrs:{for:"isolated_phenotype"}},[t._v("Enter broader OMIM phenotype (MIM phenotype):")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.isolated_phenotype,expression:"updatedCuration.isolated_phenotype"}],staticClass:"form-control",attrs:{id:"isolated_phenotype"},domProps:{value:t.updatedCuration.isolated_phenotype},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"isolated_phenotype",e.target.value)}}}),t._v(" "),a("validation-error",{attrs:{messages:t.errors.isolated_phenotype}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"rationale_notes"}},[t._v("Provide your Rationale:")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.rationale_notes,expression:"updatedCuration.rationale_notes"}],staticClass:"form-control",attrs:{id:"rationale_notes"},domProps:{value:t.updatedCuration.rationale_notes},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"rationale_notes",e.target.value)}}}),t._v(" "),a("validation-error",{attrs:{messages:t.errors.rationale_notes}})],1)],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],staticClass:"col-lg-4"},[a("criteria-table")],1)]),t._v(" "),a("curation-notifications",{staticClass:"mt-2",attrs:{curation:t.updatedCuration}})],1)}),[],!1,null,null,null).exports,w=a("j6Wa"),O=a("mLDf"),x={components:{WarningAlert:a("QAVV").a},props:["curation"],data:function(){return{matchedCurations:[]}},computed:{matchedCount:function(){return this.matchedCurations.length}},watch:{"curation.gene_symbol":function(){this.curation.gene_symbol&&this.checkCurations()},"curation.mondo_id":function(){this.curation&&this.curation.mondo_id&&this.checkCurations()}},methods:{checkCurations:_.debounce((function(){var t=this;this.curation&&this.curation.gene_symbol&&this.curation.mondo_id&&window.axios.get("/api/curations?gene_symbol="+this.curation.gene_symbol+"&mondo_id="+this.curation.mondo_id).then((function(e){t.matchedCurations=Object.values(e.data.data).filter((function(e){return e.id!=t.curation.id}))})).catch((function(t){alert("there was a problem retreiving curations that matched gene_symbol and mondo_id")}))}),500)}},k=Object(d.a)(x,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"component-container"},[t.matchedCount>0?a("warning-alert",[a("div",{attrs:{slot:"summary"},slot:"summary"},[t._v("\n            There \n            "+t._s(1==t.matchedCount?"is":"are")+" \n            already "),a("strong",[t._v(t._s(t.matchedCount))]),t._v(" \n            curations in curation or pre-curation with this gene symbol and MonDO ID.\n        ")]),t._v(" "),a("div",{attrs:{slot:"details"},slot:"details"},[a("table",{staticClass:"table table-striped table-bordered table-small bg-white"},[a("thead",[a("tr",[a("th",[t._v("Gene")]),t._v(" "),a("th",[t._v("Expert Panel")]),t._v(" "),a("th",[t._v("Status")])])]),t._v(" "),t._l(t.matchedCurations,(function(e,n){return a("tbody",{key:n},[a("tr",[a("td",[a("a",{attrs:{href:"/#/curations/"+e.id,target:"show-"+e.id}},[t._v("\n                                "+t._s(e.gene_symbol)+"\n                            ")])]),t._v(" "),a("td",[t._v(t._s(e.expert_panel.name))]),t._v(" "),a("td",[t._v(t._s(e.current_status?e.current_status.name:"no status"))])])])}))],2)])]):t._e()],1)}),[],!1,null,null,null).exports,j={mixins:[i.a],components:{MondoAlert:k,ValidationError:c.a},data:function(){return{page:"mondo",updatedCuration:{}}},watch:{updatedCuration:function(){this.$emit("input",this.updatedCuration)},value:function(t,e){this.value!=this.updatedCuration&&this.syncValue()}}},P=Object(d.a)(j,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-form-group",{class:{error:t.errors.mondo_id},attrs:{horizontal:"",label:"MonDO ID","label-for":"mondo-id"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.mondo_id,expression:"updatedCuration.mondo_id"}],staticClass:"form-control",attrs:{type:"text",placeholder:"MONDO:0001158"},domProps:{value:t.updatedCuration.mondo_id},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"mondo_id",e.target.value)}}}),t._v(" "),a("validation-error",{attrs:{messages:t.errors.mondo_id}}),t._v(" "),a("small",{staticClass:"text-muted"},[t._v("Refer to "),a("a",{attrs:{href:"https://www.ebi.ac.uk/ols/ontologies/mondo",target:"mondo"}},[t._v("MonDO")]),t._v(" for a valid MonDO ID")]),t._v(" "),a("mondo-alert",{attrs:{curation:t.updatedCuration}})],1),t._v("\n    or\n    "),a("b-form-group",{class:{error:t.errors.disease_entity_notes},attrs:{horizontal:"",label:"Disease Entity"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.disease_entity_notes,expression:"updatedCuration.disease_entity_notes"}],staticClass:"form-control",domProps:{value:t.updatedCuration.disease_entity_notes},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"disease_entity_notes",e.target.value)}}}),t._v(" "),a("small",[t._v("Use when no appropriate MonDO ID is available")])])],1)}),[],!1,null,null,null).exports,S=a("08pa"),D=a("FD4A"),I=a("+jP+"),N=a("wd/R"),$=a.n(N);function M(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?M(Object(a),!0).forEach((function(e){T(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):M(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function T(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var A={components:{ClassificationHistory:D.a,Datepicker:I.a},props:{value:{required:!0,type:Object}},data:function(){return{curationCopy:{},modalVisible:!1,newClassificationDate:new Date,newClassificationId:null,highlighted:{from:(new $.a).hour(0),to:(new $.a).hour(24)},classificationDatesUpdated:!1,errors:{}}},watch:{value:{handler:"syncCuration",immediate:!0,deep:!0}},computed:E(E({},Object(n.c)("classifications",{classifications:"Items"})),{},{classificationOptions:function(){return this.classifications}}),methods:E(E({},Object(n.b)("curations",{linkNewClassification:"linkNewClassification",updateClassification:"updateClassification",unlinkClassification:"unlinkClassification"})),{},{addClassification:function(){var t=this;this.linkNewClassification({curation:this.curationCopy,data:{classification_id:this.newClassificationId,classification_date:this.$options.filters.formatDate(this.newClassificationDate,"YYYY-MM-DD")}}).then((function(e){t.newClassificationId=null,t.newClassificationDate=new Date})).catch((function(e){t.errors=e.response.data.errors}))},updateclassificationDate:function(t,e){var a=this;t&&0!=$()(t.classification_date).diff(e)&&this.updateClassification({curation:this.curationCopy,pivotId:t.id,data:{classification_id:t.classification_id,classification_date:$()(e).format("YYYY-MM-DD")}}).then((function(t){console.log("classification date updated")})).catch((function(t){a.errors=t.data.errors}))},removeclassificationEntry:function(t){this.unlinkClassification({curation:this.curationCopy,pivotId:t.pivot.id})},submitAll:function(){null!=this.newClassificationId&&this.addClassification()},syncCuration:function(){this.curationCopy=JSON.parse(JSON.stringify(this.value))}})},V=Object(d.a)(A,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-button",{staticClass:"form-control mb-2",attrs:{variant:"info",size:"sm"},on:{click:function(e){t.modalVisible=!0}}},[t._v("Add or update classification")]),t._v(" "),a("classification-history",{attrs:{curation:t.value}}),t._v(" "),a("b-modal",{attrs:{size:"lg"},on:{hide:t.submitAll},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[a("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[a("h3",[t._v("Update Classification")])]),t._v(" "),a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("Classification")]),t._v(" "),a("th",[t._v("Date")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[a("b-form-select",{model:{value:t.newClassificationId,callback:function(e){t.newClassificationId=e},expression:"newClassificationId"}},[a("option",{domProps:{value:null}},[t._v("Select...")]),t._v(" "),t._l(t.classificationOptions,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                                "+t._s(e.name)+"\n                            ")])}))],2),t._v(" "),t.errors.classification_id?a("div",{staticClass:"text-danger"},t._l(t.errors.classification_id,(function(e){return a("div",{key:e},[a("small",[t._v(t._s(e))])])})),0):t._e()],1),t._v(" "),a("td",{staticClass:"form-inline"},[a("datepicker",{attrs:{"input-class":"form-control mr-2",format:"yyyy-MM-dd","calendar-class":"small-calendar",placeholder:"Select a date",highlighted:t.highlighted},model:{value:t.newClassificationDate,callback:function(e){t.newClassificationDate=e},expression:"newClassificationDate"}}),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:t.addClassification}},[a("strong",[t._v("+")])])],1)]),t._v(" "),t._l(t.curationCopy.classifications,(function(e){return a("tr",{key:e.pivot.id},[a("td",[a("label",{attrs:{for:"classification-date-"+e.id}},[a("strong",[t._v(t._s(e.name))])])]),t._v(" "),a("td",{staticClass:"form-inline"},[a("datepicker",{attrs:{id:"classification-date-"+e.id,"input-class":"form-control mr-2",format:"yyyy-MM-dd","calendar-class":"small-calendar",placeholder:"Select a date",highlighted:t.highlighted},on:{selected:function(a){return t.updateclassificationDate(e.pivot,a)}},model:{value:e.pivot.classification_date,callback:function(a){t.$set(e.pivot,"classification_date",a)},expression:"classification.pivot.classification_date"}}),t._v(" "),a("b-button",{on:{click:function(a){return t.removeclassificationEntry(e)}}},[a("strong",[t._v("x")])])],1)])}))],2)])])],1)}),[],!1,null,null,null).exports;function U(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function L(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?U(Object(a),!0).forEach((function(e){Y(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Y(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var J={components:{CurationNotifications:f.a,DateField:S.default,ValidationError:c.a,ClassificationForm:V},mixins:[i.a],data:function(){return{page:"mondo",updatedCuration:{}}},computed:L({},Object(n.c)("classifications",{classifications:"Items"})),methods:L({},Object(n.b)("classifications",{getAllClassifications:"getAllItems"})),mounted:function(){this.getAllClassifications()}},B=Object(d.a)(J,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"component-container"},[a("classification-form",{staticClass:"mt-1",model:{value:t.updatedCuration,callback:function(e){t.updatedCuration=e},expression:"updatedCuration"}})],1)}),[],!1,null,null,null).exports,z={components:{DocumentsCard:a("CCjs").a},mixins:[i.a],data:function(){return{page:"documents",curation:{}}},watch:{updatedCuration:function(){this.curation=this.updatedCuration?this.updatedCuration:{}}}},F=Object(d.a)(z,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("documents-card",{attrs:{curation:this.curation}})],1)}),[],!1,null,null,null).exports,R=void 0;function W(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function H(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?W(Object(a),!0).forEach((function(e){q(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):W(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function q(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var G={props:["id"],components:{Phenotypes:g,Info:O.a,Mondo:P,CurationType:m,DeleteButton:w.a,Classification:B,Documents:F},data:function(){return{currentStep:"info",steps:{info:{title:"Info",next:"curation-type"},"curation-type":{title:"Curation Type",next:"phenotypes"},phenotypes:{title:"Phenotypes",next:"mondo"},mondo:{title:"MonDO",next:"classification",back:"phenotypes"},classification:{title:"Classification",next:"documents",back:"mondo"},documents:{title:"Documents",next:null,back:"classification"}},updatedCuration:{rationals:[]},standInCuration:{id:0,expert_panel:{},rationales:[]},errors:{}}},watch:{$route:function(t,e){this.setCurrentStep()},curation:function(t,e){void 0!==t&&this.setUpdatedCuration(t,e)}},computed:H(H(H({},Object(n.c)({user:"getUser"})),Object(n.c)("curations",{curations:"Items",getCuration:"getItemById"})),{},{title:function(){var t="Edit Curation: ";return this.curation.gene_symbol&&(t+=this.curation.gene_symbol,this.curation.expert_panel&&(t+=" for "+this.curation.expert_panel.name)),t},curation:function(){if(0==this.curations.length)return this.standInCuration;var t=this.getCuration(this.id);return t||this.standInCuration},curator:function(){return R.curation.curator?R.curation.curator.name:"--"},expertPanel:function(){return R.expert_panel?R.curation.expert_panel.name:"--"},selectedPanel:function(){return R.panels.find((function(t){return t.id==R.newPanelId}))},geneSymbolError:function(){return!(this.errors&&this.errors.gene_symbol&&this.errors.gene_symbol.length>0)&&null},currentStepIdx:function(){return Object.keys(this.steps).indexOf(this.currentStep)},nextStep:function(){return"function"==typeof this.steps[this.currentStep].next?this.steps[this.currentStep].next():this.steps[this.currentStep].next},previousStep:function(){if(this.steps[this.currentStep].back)return"function"==typeof this.steps[this.currentStep].back?this.steps[this.currentStep].back():this.steps[this.currentStep].back;var t=Object.keys(this.steps);return this.currentStepIdx>0?t[this.currentStepIdx-1]:null}}),methods:H(H(H({},Object(n.d)("messages",["addInfo","addAlert"])),Object(n.b)("curations",{fetchCuration:"fetchItem",storeNewItem:"storeNewItem",storeItemUpdates:"storeItemUpdates"})),{},{updateCuration:function(t,e){var a=this;return this.updatedCuration.nav=e,this.storeItemUpdates(this.updatedCuration).then((function(e){return a.addInfo("Updates saved for "+a.updatedCuration.gene_symbol+"."),a.$emit("saved"),t&&t(e),a.errors={},e})).catch((function(t){return a.errors=t.response.data.errors,t}))},navNext:function(t){this.nextStep?this.$router.push(this.$route.path+"#"+this.nextStep):this.$router.push("/")},navBack:function(t){this.previousStep&&this.$router.push(this.$route.path+"#"+this.previousStep)},exit:function(t){this.$router.push("/")},setUpdatedCuration:function(t,e){if(void 0!==t)return void 0===e||t.id!=e.id&&t.id&&0!=t.id?(this.fetchCuration(this.curation.id),void(this.updatedCuration=JSON.parse(JSON.stringify(this.curation)))):void(this.updatedCuration=JSON.parse(JSON.stringify(this.curation)))},cancel:function(){this.$emit("canceled"),this.clearForm()},clearForm:function(){this.updatedCuration={},this.errors={}},proceed:function(){this.currentStep="disease-entity-fields"},setCurrentStep:function(){this.$route.hash.substr(1)&&(this.currentStep=this.$route.hash.substr(1))}}),mounted:function(){this.fetchCuration(this.id),this.updatedCuration={},this.curation&&this.setUpdatedCuration(this.curation,{}),this.setCurrentStep()}},K=Object(d.a)(G,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[a("router-link",{attrs:{to:"/curations"}},[t._v("\n            < Back to curations\n        ")])],1),t._v(" "),a("b-card",{attrs:{id:"edit-curation-modal"}},[a("template",{slot:"header"},[a("router-link",{staticClass:"float-right",attrs:{to:"/curations/"+t.curation.id}},[t._v("\n                view\n            ")]),t._v(" "),a("h3",[t._v(t._s(t.title))])],1),t._v(" "),this.curation.id?t.user.canEditCuration(this.curation)?t._e():a("div",{staticClass:"alert alert-danger"},[t._v("\n            Sorry.  You don't have permission to edit this curation.\n        ")]):a("div",{staticClass:"alert alert-info"},[t._v("\n            Loading...\n        ")]),t._v(" "),t.curations&&t.user.canEditCuration(this.curation)?a("div",[a("b-form",{attrs:{id:"new-curation-form"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2 border-right"},[a("nav",{staticClass:"nav flex-column"},t._l(t.steps,(function(e,n){return a("router-link",{key:n,staticClass:"nav-link",class:{active:t.currentStep==n},attrs:{to:t.$route.path+"#"+n}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])})),1)]),t._v(" "),a("div",{staticClass:"col-md-10"},[a(t.currentStep,{ref:"editPage",tag:"component",attrs:{value:t.updatedCuration,errors:t.errors},on:{input:function(e){t.updatedCuration=e}}})],1)]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("delete-button",{attrs:{curation:t.curation}}),t._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/curations")}}},[t._v("Cancel")])],1),t._v(" "),a("div",{staticClass:"col-md-8 text-right"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button",id:"curation"},on:{click:function(e){return t.updateCuration()}}},[t._v("Save")]),t._v(" "),t.nextStep?a("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.updateCuration(t.exit)}}},[t._v("Save & exit")]):t._e(),t._v(" "),a("b-button",{directives:[{name:"show",rawName:"v-show",value:t.currentStepIdx>0,expression:"currentStepIdx > 0"}],attrs:{variant:"primary"},on:{click:function(e){return t.updateCuration(t.navBack,"back")}}},[t._v("Back")]),t._v(" "),a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.updateCuration(t.navNext,"next")}}},[t._v("\n                            "+t._s(t.nextStep?"Next":"Save and exit")+"\n                        ")])],1)])])],1):t._e()],2)],1)}),[],!1,null,null,null);e.default=K.exports}}]);
//# sourceMappingURL=CurationEdit.ccf52a6990736863710e.js.map