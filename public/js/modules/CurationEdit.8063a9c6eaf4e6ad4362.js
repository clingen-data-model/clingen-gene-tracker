(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{FD4A:function(t,e,n){"use strict";var i=n("wd/R"),a=n.n(i),o=(n("XuAf"),{props:{curation:{type:Object,required:!0}},computed:{orderedClassifications:function(){return this.curation.classifications?this.curation.classifications.concat().sort((function(t,e){return a()(t.pivot.classification_date).isSame(e.pivot.classification_date)?t.id==e.id?0:t.id<e.id?1:-1:a()(t.pivot.classification_date).isBefore(e.pivot.classification_date)?1:-1})):[]}}}),r=(n("Stug"),n("KHd+")),s=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"curation-classification-history"},[n("table",{staticClass:"table table-bordered table-small"},[t._m(0),t._v(" "),t._l(t.orderedClassifications,(function(e,i){return n("tr",{key:e.pivot.id,class:{"table-primary highlight":0==i}},[n("td",[t._v(t._s(e.name))]),t._v(" "),n("td",[t._v(t._s(t._f("formatDate")(e.pivot.classification_date,"YYYY-MM-DD")))])])}))],2)])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",[this._v("Classification")]),this._v(" "),e("th",[this._v("Date")])])}],!1,null,"45066372",null);e.a=s.exports},Stug:function(t,e,n){"use strict";var i=n("Yn47");n.n(i).a},Wmfs:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,"tr.highlight td[data-v-45066372]{font-weight:700}",""])},Yn47:function(t,e,n){var i=n("Wmfs");"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,a);i.locals&&(t.exports=i.locals)},f2aF:function(t,e,n){"use strict";n.r(e);var i=n("L2JU"),a=n("PwNb"),o=n("vlNi"),r=n.n(o),s={data:function(){return{phenotypes:[],phenotypesLoaded:!1}},computed:{loading:function(){return this.$store.getters.loading}},methods:{fetchPhenotypes:function(t){var e=this;return t?r.a.gene(t).then((function(t){e.phenotypes=t.data.phenotypes,e.phenotypesLoaded=!0})).catch((function(t){console.error(t)})):new Promise((function(t,e){t()}))}}},c=n("EzaY"),u=n("ttp2"),l={components:{},data:function(){return{}},methods:{}},d=n("KHd+"),p=Object(d.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("transition",{attrs:{name:"fade"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.getters.omimLoading,expression:"$store.getters.omimLoading"}],staticClass:"alert alert-info"},[this._v("\n        Loading data from OMIM...\n    ")])])}),[],!1,null,null,null).exports,h={mixins:[a.a,s],components:{CriteriaTable:c.a,ValidationError:u.a,OmimLoading:p},data:function(){return{page:"curation-types",curationTypes:[],fields:[{key:"phenotype",sortable:!0},{key:"phenotypeMimNumber",sortable:!0},{key:"phenotypeInheritance",sortable:!0,label:"Inheritance"}]}},watch:{updatedCuration:function(t,e){t!=e&&(t.gene_symbol==e.gene_symbol&&t.curation_type_id==e.curation_type_id||this.fetchPhenotypes(this.updatedCuration.gene_symbol),this.updatedCuration.addingCurationType=1)}},computed:{options:function(){return this.phenotypesLoaded&&0==this.phenotypes.length&&null===this.updatedCuration.curation_type_id?(this.updatedCuration.curation_type_id=2,[]):1==this.phenotypes.length?this.curationTypes.filter((function(t){return"lumped"!=t.name})).map((function(t){return{text:t.description,value:t.id}})):this.curationTypes.map((function(t){return{text:t.description,value:t.id}}))}},methods:{fetchCurationTypes:function(){var t=this;window.axios.get("/api/curation-types").then((function(e){t.curationTypes=e.data}))}},mounted:function(){this.fetchCurationTypes()}},f=Object(d.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"curation-curation-container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.phenotypes.length&&!t.loading,expression:"phenotypes.length == 0 && !loading"}]},[n("div",{staticClass:"alert alert-secondary clearfix"},[n("p",[t._v("The gene "),n("strong",[t._v(t._s(t.updatedCuration.gene_symbol))]),t._v(" is not associated with a disease entity per OMIM at this time.")])])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-8"},[n("omim-loading"),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.phenotypes.length>0,expression:"phenotypes.length > 0"}]},[n("b-table",{attrs:{striped:"",hover:"",items:t.phenotypes,fields:t.fields,stacked:"sm",small:"",bordered:""}}),t._v(" "),n("div",{staticClass:"form-group"},[n("label",[n("strong",[t._v("How would you like to proceed?")])]),t._v(" "),n("b-form-radio-group",{attrs:{id:"btnradios2",size:"lg",options:t.options,stacked:"",name:"radioBtnOutline"},model:{value:t.updatedCuration.curation_type_id,callback:function(e){t.$set(t.updatedCuration,"curation_type_id",e)},expression:"updatedCuration.curation_type_id"}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.curation_type_id}})],1)],1)])],1),t._v(" "),n("div",{staticClass:"col-lg-4"},[n("criteria-table")],1)])])}),[],!1,null,null,null).exports,m=n("0R+v");function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C={components:{CriteriaTable:c.a,CurationNotifications:m.a,ValidationError:u.a},props:["disabled"],mixins:[a.a,s],data:function(){return{page:"phenotypes",phenotypes:[],updatedCuration:{},fields:[{key:"phenotype",sortable:!0},{key:"phenotypeMimNumber",sortable:!0},{key:"phenotypeInheritance",sortable:!0,label:"Inheritance"},{key:"checkbox",tdClass:"text-right w-10",sortable:!1,label:" ",formatter:function(t,e,n){return{mim_number:n.phenotypeMimNumber,name:n.phenotype}}}],message:null}},watch:{updatedCuration:function(t,e){var n=this;t.gene_symbol!=e.gene_symbol&&this.fetchPhenotypes(this.updatedCuration.gene_symbol).then((function(t){n.phenotypes&&1==n.phenotypes.length&&1==n.updatedCuration.curation_type_id&&n.updatedCuration.phenotypes&&0==n.updatedCuration.phenotypes.length&&(Vue.set(n.updatedCuration.phenotypes,0,{mim_number:n.phenotypes[0].phenotypeMimNumber,name:n.phenotypes[0].phenotype}),n.message="We have preselected the phenotype because you indicated you are curating "+n.updatedCuration.gene_symbol+" with this single disease entity")}))}},computed:y(y({},Object(i.c)("rationales",{rationales:"Items"})),{},{showPmids:function(){},loading:function(){return this.$store.getters.loading},showTable:function(){return 2!=this.updatedCuration.curation_type_id&&3!=this.updatedCuration.curation_type_id&&this.phenotypes.length>0},showRationale:function(){return(!this.updatedCuration.curation_type||1!=this.updatedCuration.curation_type.id||1!=this.phenotypes.length)&&0!=this.phenotypes.length}})},g=Object(d.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-8"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.loading&&t.phenotypes.length<1,expression:"loading && phenotypes.length < 1"}],staticClass:"alert alert-info"},[t._v("Loading phenotype information...")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading||t.phenotypes.length>0,expression:"!loading || phenotypes.length > 0"}]},[n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.phenotypes.length,expression:"phenotypes.length == 0"}],staticClass:"alert alert-secondary clearfix"},[n("p",[t._v("The gene "),n("strong",[t._v(t._s(t.updatedCuration.value))]),t._v(" is not associated with a disease entity per OMIM at this time.")])]),t._v(" "),n("b-table",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],attrs:{items:t.phenotypes,fields:t.fields,stacked:"sm",striped:"",hover:"",small:""},scopedSlots:t._u([{key:"head(checkbox)",fn:function(e){return[t._v("\n                            \n                    ")]}},{key:"cell(checkbox)",fn:function(e){return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.phenotypes,expression:"updatedCuration.phenotypes"}],staticClass:"form-check-input form-check-input-lg",attrs:{type:"checkbox",disabled:t.disabled},domProps:{value:e.value,checked:Array.isArray(t.updatedCuration.phenotypes)?t._i(t.updatedCuration.phenotypes,e.value)>-1:t.updatedCuration.phenotypes},on:{change:function(n){var i=t.updatedCuration.phenotypes,a=n.target,o=!!a.checked;if(Array.isArray(i)){var r=e.value,s=t._i(i,r);a.checked?s<0&&t.$set(t.updatedCuration,"phenotypes",i.concat([r])):s>-1&&t.$set(t.updatedCuration,"phenotypes",i.slice(0,s).concat(i.slice(s+1)))}else t.$set(t.updatedCuration,"phenotypes",o)}}})]}}])}),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"alert alert-info"},[t._v(t._s(t.message))])],1),t._v(" "),t.showRationale?n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"rationale_id"}},[t._v("What is your rationale for this curation?")]),t._v(" "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.rationales,expression:"updatedCuration.rationales"}],staticClass:"form-control",staticStyle:{height:"8.5em"},attrs:{multiple:""},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.updatedCuration,"rationales",e.target.multiple?n:n[0])}}},t._l(t.rationales,(function(e){return n("option",{key:e.id,domProps:{value:e,selected:t.updatedCuration.rationales.map((function(t){return t.id})).indexOf(e.id)>-1}},[t._v("\n                        "+t._s(e.name)+"\n                    ")])})),0),t._v(" "),n("validation-error",{attrs:{messages:t.errors.rationales}})],1):t._e(),t._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:100==t.updatedCuration.rationale_id,expression:"updatedCuration.rationale_id == 100"}],staticClass:"form-group"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.rationale_other,expression:"updatedCuration.rationale_other"}],staticClass:"form-control",attrs:{placeholder:"Other rationale details"},domProps:{value:t.updatedCuration.rationale_other},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"rationale_other",e.target.value)}}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.rationale_other}})],1)]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:3!=t.updatedCuration.curation_type_id,expression:"updatedCuration.curation_type_id != 3"}],staticClass:"form-group"},[n("label",{attrs:{for:"pmids"}},[t._v("Supporting PMIDS:")]),t._v(" "),n("small",[t._v("comma separated list")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.pmids,expression:"updatedCuration.pmids"}],staticClass:"form-control",attrs:{id:"pmids",placeholder:"18183754, 123451, 1231231"},domProps:{value:t.updatedCuration.pmids},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"pmids",e.target.value)}}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.pmids}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:3==t.updatedCuration.curation_type_id,expression:"updatedCuration.curation_type_id == 3"}],staticClass:"form-group"},[n("label",{attrs:{for:"isolated_phenotype"}},[t._v("Enter broader OMIM phenotype (MIM phenotype):")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.isolated_phenotype,expression:"updatedCuration.isolated_phenotype"}],staticClass:"form-control",attrs:{id:"isolated_phenotype"},domProps:{value:t.updatedCuration.isolated_phenotype},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"isolated_phenotype",e.target.value)}}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.isolated_phenotype}})],1),t._v(" "),n("div",{staticClass:"form-group"},[n("label",{attrs:{for:"rationale_notes"}},[t._v("Provide your Rationale:")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.rationale_notes,expression:"updatedCuration.rationale_notes"}],staticClass:"form-control",attrs:{id:"rationale_notes"},domProps:{value:t.updatedCuration.rationale_notes},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"rationale_notes",e.target.value)}}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.rationale_notes}})],1)],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTable,expression:"showTable"}],staticClass:"col-lg-4"},[n("criteria-table")],1)]),t._v(" "),n("curation-notifications",{staticClass:"mt-2",attrs:{curation:t.updatedCuration}})],1)}),[],!1,null,null,null).exports,w=n("j6Wa"),O=n("mLDf"),x={components:{WarningAlert:n("QAVV").a},props:["curation"],data:function(){return{matchedCurations:[]}},computed:{matchedCount:function(){return this.matchedCurations.length}},watch:{"curation.gene_symbol":function(){this.curation.gene_symbol&&this.checkCurations()},"curation.mondo_id":function(){this.curation&&this.curation.mondo_id&&this.checkCurations()}},methods:{checkCurations:_.debounce((function(){var t=this;this.curation&&this.curation.gene_symbol&&this.curation.mondo_id&&window.axios.get("/api/curations?gene_symbol="+this.curation.gene_symbol+"&mondo_id="+this.curation.mondo_id).then((function(e){t.matchedCurations=Object.values(e.data.data).filter((function(e){return e.id!=t.curation.id}))})).catch((function(t){alert("there was a problem retreiving curations that matched gene_symbol and mondo_id")}))}),500)}},j=Object(d.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-container"},[t.matchedCount>0?n("warning-alert",[n("div",{attrs:{slot:"summary"},slot:"summary"},[t._v("\n            There \n            "+t._s(1==t.matchedCount?"is":"are")+" \n            already "),n("strong",[t._v(t._s(t.matchedCount))]),t._v(" \n            curations in curation or pre-curation with this gene symbol and MonDO ID.\n        ")]),t._v(" "),n("div",{attrs:{slot:"details"},slot:"details"},[n("table",{staticClass:"table table-striped table-bordered table-small bg-white"},[n("thead",[n("tr",[n("th",[t._v("Gene")]),t._v(" "),n("th",[t._v("Expert Panel")]),t._v(" "),n("th",[t._v("Status")])])]),t._v(" "),t._l(t.matchedCurations,(function(e,i){return n("tbody",{key:i},[n("tr",[n("td",[n("a",{attrs:{href:"/#/curations/"+e.id,target:"show-"+e.id}},[t._v("\n                                "+t._s(e.gene_symbol)+"\n                            ")])]),t._v(" "),n("td",[t._v(t._s(e.expert_panel.name))]),t._v(" "),n("td",[t._v(t._s(e.current_status?e.current_status.name:"no status"))])])])}))],2)])]):t._e()],1)}),[],!1,null,null,null).exports,k={mixins:[a.a],components:{MondoAlert:j,ValidationError:u.a},data:function(){return{page:"mondo",updatedCuration:{}}},watch:{updatedCuration:function(){this.$emit("input",this.updatedCuration)},value:function(t,e){this.value!=this.updatedCuration&&this.syncValue()}}},P=Object(d.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-form-group",{class:{error:t.errors.mondo_id},attrs:{horizontal:"",label:"MonDO ID","label-for":"mondo-id"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.mondo_id,expression:"updatedCuration.mondo_id"}],staticClass:"form-control",attrs:{type:"text",placeholder:"MONDO:0001158"},domProps:{value:t.updatedCuration.mondo_id},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"mondo_id",e.target.value)}}}),t._v(" "),n("validation-error",{attrs:{messages:t.errors.mondo_id}}),t._v(" "),n("small",{staticClass:"text-muted"},[t._v("Refer to "),n("a",{attrs:{href:"https://www.ebi.ac.uk/ols/ontologies/mondo",target:"mondo"}},[t._v("MonDO")]),t._v(" for a valid MonDO ID")]),t._v(" "),n("mondo-alert",{attrs:{curation:t.updatedCuration}})],1),t._v("\n    or\n    "),n("b-form-group",{class:{error:t.errors.disease_entity_notes},attrs:{horizontal:"",label:"Disease Entity"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.updatedCuration.disease_entity_notes,expression:"updatedCuration.disease_entity_notes"}],staticClass:"form-control",domProps:{value:t.updatedCuration.disease_entity_notes},on:{input:function(e){e.target.composing||t.$set(t.updatedCuration,"disease_entity_notes",e.target.value)}}}),t._v(" "),n("small",[t._v("Use when no appropriate MonDO ID is available")])])],1)}),[],!1,null,null,null).exports,D=n("08pa"),S=n("FD4A"),I=n("+jP+"),N=n("wd/R"),$=n.n(N);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function M(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){T(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var A={components:{ClassificationHistory:S.a,Datepicker:I.a},props:{value:{required:!0,type:Object}},data:function(){return{curationCopy:{},modalVisible:!1,newClassificationDate:new Date,newClassificationId:null,highlighted:{from:(new $.a).hour(0),to:(new $.a).hour(24)},classificationDatesUpdated:!1,errors:{}}},watch:{value:{handler:"syncCuration",immediate:!0,deep:!0}},computed:M(M({},Object(i.c)("classifications",{classifications:"Items"})),{},{classificationOptions:function(){return this.classifications}}),methods:M(M({},Object(i.b)("curations",{linkNewClassification:"linkNewClassification",updateClassification:"updateClassification",unlinkClassification:"unlinkClassification"})),{},{addClassification:function(){var t=this;this.linkNewClassification({curation:this.curationCopy,data:{classification_id:this.newClassificationId,classification_date:this.$options.filters.formatDate(this.newClassificationDate,"YYYY-MM-DD")}}).then((function(e){t.newClassificationId=null,t.newClassificationDate=new Date})).catch((function(e){t.errors=e.response.data.errors}))},updateclassificationDate:function(t,e){var n=this;t&&0!=$()(t.classification_date).diff(e)&&this.updateClassification({curation:this.curationCopy,pivotId:t.id,data:{classification_id:t.classification_id,classification_date:$()(e).format("YYYY-MM-DD")}}).then((function(t){console.log("classification date updated")})).catch((function(t){n.errors=t.data.errors}))},removeclassificationEntry:function(t){this.unlinkClassification({curation:this.curationCopy,pivotId:t.pivot.id})},submitAll:function(){null!=this.newClassificationId&&this.addClassification()},syncCuration:function(){this.curationCopy=JSON.parse(JSON.stringify(this.value))}})},Y=Object(d.a)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button",{staticClass:"form-control mb-2",attrs:{variant:"info",size:"sm"},on:{click:function(e){t.modalVisible=!0}}},[t._v("Add or update classification")]),t._v(" "),n("classification-history",{attrs:{curation:t.value}}),t._v(" "),n("b-modal",{attrs:{size:"lg"},on:{hide:t.submitAll},model:{value:t.modalVisible,callback:function(e){t.modalVisible=e},expression:"modalVisible"}},[n("div",{attrs:{slot:"modal-header"},slot:"modal-header"},[n("h3",[t._v("Update Classification")])]),t._v(" "),n("table",{staticClass:"table"},[n("thead",[n("tr",[n("th",[t._v("Classification")]),t._v(" "),n("th",[t._v("Date")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[n("b-form-select",{model:{value:t.newClassificationId,callback:function(e){t.newClassificationId=e},expression:"newClassificationId"}},[n("option",{domProps:{value:null}},[t._v("Select...")]),t._v(" "),t._l(t.classificationOptions,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v("\n                                "+t._s(e.name)+"\n                            ")])}))],2),t._v(" "),t.errors.classification_id?n("div",{staticClass:"text-danger"},t._l(t.errors.classification_id,(function(e){return n("div",{key:e},[n("small",[t._v(t._s(e))])])})),0):t._e()],1),t._v(" "),n("td",{staticClass:"form-inline"},[n("datepicker",{attrs:{"input-class":"form-control mr-2",format:"yyyy-MM-dd","calendar-class":"small-calendar",placeholder:"Select a date",highlighted:t.highlighted},model:{value:t.newClassificationDate,callback:function(e){t.newClassificationDate=e},expression:"newClassificationDate"}}),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:t.addClassification}},[n("strong",[t._v("+")])])],1)]),t._v(" "),t._l(t.curationCopy.classifications,(function(e){return n("tr",{key:e.pivot.id},[n("td",[n("label",{attrs:{for:"classification-date-"+e.id}},[n("strong",[t._v(t._s(e.name))])])]),t._v(" "),n("td",{staticClass:"form-inline"},[n("datepicker",{attrs:{id:"classification-date-"+e.id,"input-class":"form-control mr-2",format:"yyyy-MM-dd","calendar-class":"small-calendar",placeholder:"Select a date",highlighted:t.highlighted},on:{selected:function(n){return t.updateclassificationDate(e.pivot,n)}},model:{value:e.pivot.classification_date,callback:function(n){t.$set(e.pivot,"classification_date",n)},expression:"classification.pivot.classification_date"}}),t._v(" "),n("b-button",{on:{click:function(n){return t.removeclassificationEntry(e)}}},[n("strong",[t._v("x")])])],1)])}))],2)])])],1)}),[],!1,null,null,null).exports;function V(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function L(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?V(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J={components:{CurationNotifications:m.a,DateField:D.default,ValidationError:u.a,ClassificationForm:Y},mixins:[a.a],data:function(){return{page:"mondo",updatedCuration:{}}},computed:L({},Object(i.c)("classifications",{classifications:"Items"})),methods:L({},Object(i.b)("classifications",{getAllClassifications:"getAllItems"})),mounted:function(){this.getAllClassifications()}},B=Object(d.a)(J,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-container"},[n("classification-form",{staticClass:"mt-1",model:{value:t.updatedCuration,callback:function(e){t.updatedCuration=e},expression:"updatedCuration"}})],1)}),[],!1,null,null,null).exports,F=void 0;function R(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?R(Object(n),!0).forEach((function(e){z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var H={props:["id"],components:{Phenotypes:g,Info:O.a,Mondo:P,CurationType:f,DeleteButton:w.a,Classification:B},data:function(){return{user:user,currentStep:"info",steps:{info:{title:"Info",next:"curation-type"},"curation-type":{title:"Curation Type",next:"phenotypes"},phenotypes:{title:"Phenotypes",next:"mondo"},mondo:{title:"MonDO",next:"classification",back:"phenotypes"},classification:{title:"Classification",next:null,back:"mondo"}},updatedCuration:{rationals:[]},standInCuration:{id:0,expert_panel:{},rationales:[]},errors:{}}},watch:{$route:function(t,e){this.setCurrentStep()},curation:function(t,e){void 0!==t&&this.setUpdatedCuration(t,e)}},computed:W(W({},Object(i.c)("curations",{curations:"Items",getCuration:"getItemById"})),{},{title:function(){var t="Edit Curation: ";return this.curation.gene_symbol&&(t+=this.curation.gene_symbol,this.curation.expert_panel&&(t+=" for "+this.curation.expert_panel.name)),t},curation:function(){if(0==this.curations.length)return this.standInCuration;var t=this.getCuration(this.id);return t||this.standInCuration},curator:function(){return F.curation.curator?F.curation.curator.name:"--"},expertPanel:function(){return F.expert_panel?F.curation.expert_panel.name:"--"},selectedPanel:function(){return F.panels.find((function(t){return t.id==F.newPanelId}))},geneSymbolError:function(){return!(this.errors&&this.errors.gene_symbol&&this.errors.gene_symbol.length>0)&&null},currentStepIdx:function(){return Object.keys(this.steps).indexOf(this.currentStep)},nextStep:function(){return"function"==typeof this.steps[this.currentStep].next?this.steps[this.currentStep].next():this.steps[this.currentStep].next},previousStep:function(){if(this.steps[this.currentStep].back)return"function"==typeof this.steps[this.currentStep].back?this.steps[this.currentStep].back():this.steps[this.currentStep].back;var t=Object.keys(this.steps);return this.currentStepIdx>0?t[this.currentStepIdx-1]:null}}),methods:W(W(W({},Object(i.d)("messages",["addInfo","addAlert"])),Object(i.b)("curations",{fetchCuration:"fetchItem",storeNewItem:"storeNewItem",storeItemUpdates:"storeItemUpdates"})),{},{updateCuration:function(t,e){var n=this;return this.updatedCuration.nav=e,this.storeItemUpdates(this.updatedCuration).then((function(e){return n.addInfo("Updates saved for "+n.updatedCuration.gene_symbol+"."),n.$emit("saved"),t&&t(e),n.errors={},e})).catch((function(t){return n.errors=t.response.data.errors,t}))},navNext:function(t){this.nextStep?this.$router.push(this.$route.path+"#"+this.nextStep):this.$router.push("/")},navBack:function(t){this.previousStep&&this.$router.push(this.$route.path+"#"+this.previousStep)},exit:function(t){this.$router.push("/")},setUpdatedCuration:function(t,e){if(void 0!==t)return void 0===e||t.id!=e.id&&t.id&&0!=t.id?(this.fetchCuration(this.curation.id),void(this.updatedCuration=JSON.parse(JSON.stringify(this.curation)))):void(this.updatedCuration=JSON.parse(JSON.stringify(this.curation)))},cancel:function(){this.$emit("canceled"),this.clearForm()},clearForm:function(){this.updatedCuration={},this.errors={}},proceed:function(){this.currentStep="disease-entity-fields"},setCurrentStep:function(){this.$route.hash.substr(1)&&(this.currentStep=this.$route.hash.substr(1))}}),mounted:function(){this.fetchCuration(this.id),this.updatedCuration={},this.curation&&this.setUpdatedCuration(this.curation,{}),this.setCurrentStep()}},q=Object(d.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",[n("router-link",{attrs:{to:"/curations"}},[t._v("\n            < Back to curations\n        ")])],1),t._v(" "),n("b-card",{attrs:{id:"edit-curation-modal"}},[n("template",{slot:"header"},[n("router-link",{staticClass:"float-right",attrs:{to:"/curations/"+t.curation.id}},[t._v("\n                view\n            ")]),t._v(" "),n("h3",[t._v(t._s(t.title))])],1),t._v(" "),this.curation.id?t.user.canEditCuration(this.curation)?t._e():n("div",{staticClass:"alert alert-danger"},[t._v("\n            Sorry.  You don't have permission to edit this curation.\n        ")]):n("div",{staticClass:"alert alert-info"},[t._v("\n            Loading...\n        ")]),t._v(" "),t.curations&&t.user.canEditCuration(this.curation)?n("div",[n("b-form",{attrs:{id:"new-curation-form"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-2 border-right"},[n("nav",{staticClass:"nav flex-column"},t._l(t.steps,(function(e,i){return n("router-link",{key:i,staticClass:"nav-link",class:{active:t.currentStep==i},attrs:{to:t.$route.path+"#"+i}},[t._v("\n                                "+t._s(e.title)+"\n                            ")])})),1)]),t._v(" "),n("div",{staticClass:"col-md-10"},[n(t.currentStep,{ref:"editPage",tag:"component",attrs:{value:t.updatedCuration,errors:t.errors},on:{input:function(e){t.updatedCuration=e}}})],1)]),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-4"},[n("delete-button",{attrs:{curation:t.curation}}),t._v(" "),n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.$router.push("/curations")}}},[t._v("Cancel")])],1),t._v(" "),n("div",{staticClass:"col-md-8 text-right"},[n("button",{staticClass:"btn btn-secondary",attrs:{type:"button",id:"curation"},on:{click:function(e){return t.updateCuration()}}},[t._v("Save")]),t._v(" "),t.nextStep?n("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(e){return t.updateCuration(t.exit)}}},[t._v("Save & exit")]):t._e(),t._v(" "),n("b-button",{directives:[{name:"show",rawName:"v-show",value:t.currentStepIdx>0,expression:"currentStepIdx > 0"}],attrs:{variant:"primary"},on:{click:function(e){return t.updateCuration(t.navBack,"back")}}},[t._v("Back")]),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.updateCuration(t.navNext,"next")}}},[t._v("\n                            "+t._s(t.nextStep?"Next":"Save and exit")+"\n                        ")])],1)])])],1):t._e()],2)],1)}),[],!1,null,null,null);e.default=q.exports},j6Wa:function(t,e,n){"use strict";var i=n("L2JU");function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={props:{curation:{required:!0,type:Object}},data:function(){return{user:user}},computed:{title:function(){var t="";return this.curation&&this.curation.gene_symbol&&(t+=this.curation.gene_symbol,this.curation.mondo_id&&(t+=" / "+this.curation.mondo_id),this.curation.expert_panel&&(t+=" for "+this.curation.expert_panel.name)),t}},methods:o(o(o({},Object(i.b)("curations",{destroyCuration:"destroyItem"})),Object(i.d)("messages",["addInfo","addError"])),{},{deleteCuration:function(){var t=this;if(confirm("You're about to delete "+this.title+". This can not be undone.  Are you sure you want to continue?")){this.$router.push("/");var e=this.title;this.destroyCuration(this.curation.id).then((function(n){t.addInfo(e+" was successfully deleted.")})).catch((function(n){var i="There was a problem deleting"+e;403==n.response.status&&(i="You do not have permissions to delete curations.  Please contact an adminstrator to help you delete the curation."),t.addError(i)}))}}})},c=n("KHd+"),u=Object(c.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.user.canDeleteCuration(t.curation)?n("button",{staticClass:"btn btn-danger",attrs:{id:"delete-curation-"+t.curation.id+"-btn"},on:{click:function(e){return t.deleteCuration(t.curation)}}},[t._t("default",[t._v("Delete")])],2):t._e()}),[],!1,null,null,null);e.a=u.exports}}]);
//# sourceMappingURL=CurationEdit.8063a9c6eaf4e6ad4362.js.map